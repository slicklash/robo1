import{c as xt,b as Qn,g as Kn}from"./index.f1f2c4b1.js";function Yn(e,r){for(var t=0;t<r.length;t++){const n=r[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var Ot={},$t={},Ft=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;r[t]=i;for(t in r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var o=Object.getOwnPropertySymbols(r);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(r,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(r,t);if(l.value!==i||l.enumerable!==!0)return!1}return!0},Zn=Ft,Gr=function(){return Zn()&&!!Symbol.toStringTag},ot=typeof Symbol<"u"&&Symbol,ei=Ft,ri=function(){return typeof ot!="function"||typeof Symbol!="function"||typeof ot("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:ei()},st={foo:{}},ti=Object,ni=function(){return{__proto__:st}.foo===st.foo&&!({__proto__:null}instanceof ti)},ii="Function.prototype.bind called on incompatible ",ai=Object.prototype.toString,oi=Math.max,si="[object Function]",lt=function(r,t){for(var n=[],i=0;i<r.length;i+=1)n[i]=r[i];for(var o=0;o<t.length;o+=1)n[o+r.length]=t[o];return n},li=function(r,t){for(var n=[],i=t||0,o=0;i<r.length;i+=1,o+=1)n[o]=r[i];return n},fi=function(e,r){for(var t="",n=0;n<e.length;n+=1)t+=e[n],n+1<e.length&&(t+=r);return t},ci=function(r){var t=this;if(typeof t!="function"||ai.apply(t)!==si)throw new TypeError(ii+t);for(var n=li(arguments,1),i,o=function(){if(this instanceof i){var E=t.apply(this,lt(n,arguments));return Object(E)===E?E:this}return t.apply(r,lt(n,arguments))},l=oi(0,t.length-n.length),u=[],s=0;s<l;s++)u[s]="$"+s;if(i=Function("binder","return function ("+fi(u,",")+"){ return binder.apply(this,arguments); }")(o),t.prototype){var d=function(){};d.prototype=t.prototype,i.prototype=new d,d.prototype=null}return i},ui=ci,qr=Function.prototype.bind||ui,hi=Function.prototype.call,di=Object.prototype.hasOwnProperty,gi=qr,mi=gi.call(hi,di),P,Fe=SyntaxError,Tt=Function,$e=TypeError,yr=function(e){try{return Tt('"use strict"; return ('+e+").constructor;")()}catch{}},de=Object.getOwnPropertyDescriptor;if(de)try{de({},"")}catch{de=null}var pr=function(){throw new $e},yi=de?function(){try{return arguments.callee,pr}catch{try{return de(arguments,"callee").get}catch{return pr}}}():pr,Pe=ri(),pi=ni(),T=Object.getPrototypeOf||(pi?function(e){return e.__proto__}:null),ke={},bi=typeof Uint8Array>"u"||!T?P:T(Uint8Array),ge={"%AggregateError%":typeof AggregateError>"u"?P:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?P:ArrayBuffer,"%ArrayIteratorPrototype%":Pe&&T?T([][Symbol.iterator]()):P,"%AsyncFromSyncIteratorPrototype%":P,"%AsyncFunction%":ke,"%AsyncGenerator%":ke,"%AsyncGeneratorFunction%":ke,"%AsyncIteratorPrototype%":ke,"%Atomics%":typeof Atomics>"u"?P:Atomics,"%BigInt%":typeof BigInt>"u"?P:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?P:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?P:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?P:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?P:Float32Array,"%Float64Array%":typeof Float64Array>"u"?P:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?P:FinalizationRegistry,"%Function%":Tt,"%GeneratorFunction%":ke,"%Int8Array%":typeof Int8Array>"u"?P:Int8Array,"%Int16Array%":typeof Int16Array>"u"?P:Int16Array,"%Int32Array%":typeof Int32Array>"u"?P:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Pe&&T?T(T([][Symbol.iterator]())):P,"%JSON%":typeof JSON=="object"?JSON:P,"%Map%":typeof Map>"u"?P:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Pe||!T?P:T(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?P:Promise,"%Proxy%":typeof Proxy>"u"?P:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?P:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?P:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Pe||!T?P:T(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?P:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Pe&&T?T(""[Symbol.iterator]()):P,"%Symbol%":Pe?Symbol:P,"%SyntaxError%":Fe,"%ThrowTypeError%":yi,"%TypedArray%":bi,"%TypeError%":$e,"%Uint8Array%":typeof Uint8Array>"u"?P:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?P:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?P:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?P:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?P:WeakMap,"%WeakRef%":typeof WeakRef>"u"?P:WeakRef,"%WeakSet%":typeof WeakSet>"u"?P:WeakSet};if(T)try{null.error}catch(e){var vi=T(T(e));ge["%Error.prototype%"]=vi}var wi=function e(r){var t;if(r==="%AsyncFunction%")t=yr("async function () {}");else if(r==="%GeneratorFunction%")t=yr("function* () {}");else if(r==="%AsyncGeneratorFunction%")t=yr("async function* () {}");else if(r==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(r==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&T&&(t=T(i.prototype))}return ge[r]=t,t},ft={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},De=qr,ir=mi,Ei=De.call(Function.call,Array.prototype.concat),Ai=De.call(Function.apply,Array.prototype.splice),ct=De.call(Function.call,String.prototype.replace),ar=De.call(Function.call,String.prototype.slice),Pi=De.call(Function.call,RegExp.prototype.exec),Si=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ii=/\\(\\)?/g,ji=function(r){var t=ar(r,0,1),n=ar(r,-1);if(t==="%"&&n!=="%")throw new Fe("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new Fe("invalid intrinsic syntax, expected opening `%`");var i=[];return ct(r,Si,function(o,l,u,s){i[i.length]=u?ct(s,Ii,"$1"):l||o}),i},ki=function(r,t){var n=r,i;if(ir(ft,n)&&(i=ft[n],n="%"+i[0]+"%"),ir(ge,n)){var o=ge[n];if(o===ke&&(o=wi(n)),typeof o>"u"&&!t)throw new $e("intrinsic "+r+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Fe("intrinsic "+r+" does not exist!")},Te=function(r,t){if(typeof r!="string"||r.length===0)throw new $e("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new $e('"allowMissing" argument must be a boolean');if(Pi(/^%?[^%]*%?$/,r)===null)throw new Fe("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=ji(r),i=n.length>0?n[0]:"",o=ki("%"+i+"%",t),l=o.name,u=o.value,s=!1,d=o.alias;d&&(i=d[0],Ai(n,Ei([0,1],d)));for(var E=1,I=!0;E<n.length;E+=1){var O=n[E],z=ar(O,0,1),v=ar(O,-1);if((z==='"'||z==="'"||z==="`"||v==='"'||v==="'"||v==="`")&&z!==v)throw new Fe("property names with quotes must have matching quotes");if((O==="constructor"||!I)&&(s=!0),i+="."+O,l="%"+i+"%",ir(ge,l))u=ge[l];else if(u!=null){if(!(O in u)){if(!t)throw new $e("base intrinsic for "+r+" exists, but the property is not available.");return}if(de&&E+1>=n.length){var M=de(u,O);I=!!M,I&&"get"in M&&!("originalValue"in M.get)?u=M.get:u=u[O]}else I=ir(u,O),u=u[O];I&&!s&&(ge[l]=u)}}return u},Bt={exports:{}},Ri=Te,Rr=Ri("%Object.defineProperty%",!0),xr=function(){if(Rr)try{return Rr({},"a",{value:1}),!0}catch{return!1}return!1};xr.hasArrayLengthDefineBug=function(){if(!xr())return null;try{return Rr([],"length",{value:1}).length!==1}catch{return!0}};var Mt=xr,xi=Te,Ze=xi("%Object.getOwnPropertyDescriptor%",!0);if(Ze)try{Ze([],"length")}catch{Ze=null}var Wr=Ze,Oi=Mt(),Vr=Te,Le=Oi&&Vr("%Object.defineProperty%",!0);if(Le)try{Le({},"a",{value:1})}catch{Le=!1}var $i=Vr("%SyntaxError%"),Se=Vr("%TypeError%"),ut=Wr,Fi=function(r,t,n){if(!r||typeof r!="object"&&typeof r!="function")throw new Se("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new Se("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Se("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Se("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Se("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Se("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,l=arguments.length>5?arguments[5]:null,u=arguments.length>6?arguments[6]:!1,s=!!ut&&ut(r,t);if(Le)Le(r,t,{configurable:l===null&&s?s.configurable:!l,enumerable:i===null&&s?s.enumerable:!i,value:n,writable:o===null&&s?s.writable:!o});else if(u||!i&&!o&&!l)r[t]=n;else throw new $i("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Lt=Te,ht=Fi,Ti=Mt(),dt=Wr,gt=Lt("%TypeError%"),Bi=Lt("%Math.floor%"),Mi=function(r,t){if(typeof r!="function")throw new gt("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||Bi(t)!==t)throw new gt("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in r&&dt){var l=dt(r,"length");l&&!l.configurable&&(i=!1),l&&!l.writable&&(o=!1)}return(i||o||!n)&&(Ti?ht(r,"length",t,!0,!0):ht(r,"length",t)),r};(function(e){var r=qr,t=Te,n=Mi,i=t("%TypeError%"),o=t("%Function.prototype.apply%"),l=t("%Function.prototype.call%"),u=t("%Reflect.apply%",!0)||r.call(l,o),s=t("%Object.defineProperty%",!0),d=t("%Math.max%");if(s)try{s({},"a",{value:1})}catch{s=null}e.exports=function(O){if(typeof O!="function")throw new i("a function is required");var z=u(r,l,arguments);return n(z,1+d(0,O.length-(arguments.length-1)),!0)};var E=function(){return u(r,o,arguments)};s?s(e.exports,"apply",{value:E}):e.exports.apply=E})(Bt);var Nt=Bt.exports,_t=Te,Ct=Nt,Li=Ct(_t("String.prototype.indexOf")),Dt=function(r,t){var n=_t(r,!!t);return typeof n=="function"&&Li(r,".prototype.")>-1?Ct(n):n},Ni=Gr(),_i=Dt,Or=_i("Object.prototype.toString"),ur=function(r){return Ni&&r&&typeof r=="object"&&Symbol.toStringTag in r?!1:Or(r)==="[object Arguments]"},zt=function(r){return ur(r)?!0:r!==null&&typeof r=="object"&&typeof r.length=="number"&&r.length>=0&&Or(r)!=="[object Array]"&&Or(r.callee)==="[object Function]"},Ci=function(){return ur(arguments)}();ur.isLegacyArguments=zt;var Di=Ci?ur:zt,zi=Object.prototype.toString,Ui=Function.prototype.toString,Gi=/^\s*(?:function)?\*/,Ut=Gr(),br=Object.getPrototypeOf,qi=function(){if(!Ut)return!1;try{return Function("return function*() {}")()}catch{}},vr,Wi=function(r){if(typeof r!="function")return!1;if(Gi.test(Ui.call(r)))return!0;if(!Ut){var t=zi.call(r);return t==="[object GeneratorFunction]"}if(!br)return!1;if(typeof vr>"u"){var n=qi();vr=n?br(n):!1}return br(r)===vr},Gt=Function.prototype.toString,Oe=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,$r,er;if(typeof Oe=="function"&&typeof Object.defineProperty=="function")try{$r=Object.defineProperty({},"length",{get:function(){throw er}}),er={},Oe(function(){throw 42},null,$r)}catch(e){e!==er&&(Oe=null)}else Oe=null;var Vi=/^\s*class\b/,Fr=function(r){try{var t=Gt.call(r);return Vi.test(t)}catch{return!1}},wr=function(r){try{return Fr(r)?!1:(Gt.call(r),!0)}catch{return!1}},rr=Object.prototype.toString,Hi="[object Object]",Xi="[object Function]",Ji="[object GeneratorFunction]",Qi="[object HTMLAllCollection]",Ki="[object HTML document.all class]",Yi="[object HTMLCollection]",Zi=typeof Symbol=="function"&&!!Symbol.toStringTag,ea=!(0 in[,]),Tr=function(){return!1};if(typeof document=="object"){var ra=document.all;rr.call(ra)===rr.call(document.all)&&(Tr=function(r){if((ea||!r)&&(typeof r>"u"||typeof r=="object"))try{var t=rr.call(r);return(t===Qi||t===Ki||t===Yi||t===Hi)&&r("")==null}catch{}return!1})}var ta=Oe?function(r){if(Tr(r))return!0;if(!r||typeof r!="function"&&typeof r!="object")return!1;try{Oe(r,null,$r)}catch(t){if(t!==er)return!1}return!Fr(r)&&wr(r)}:function(r){if(Tr(r))return!0;if(!r||typeof r!="function"&&typeof r!="object")return!1;if(Zi)return wr(r);if(Fr(r))return!1;var t=rr.call(r);return t!==Xi&&t!==Ji&&!/^\[object HTML/.test(t)?!1:wr(r)},na=ta,ia=Object.prototype.toString,qt=Object.prototype.hasOwnProperty,aa=function(r,t,n){for(var i=0,o=r.length;i<o;i++)qt.call(r,i)&&(n==null?t(r[i],i,r):t.call(n,r[i],i,r))},oa=function(r,t,n){for(var i=0,o=r.length;i<o;i++)n==null?t(r.charAt(i),i,r):t.call(n,r.charAt(i),i,r)},sa=function(r,t,n){for(var i in r)qt.call(r,i)&&(n==null?t(r[i],i,r):t.call(n,r[i],i,r))},la=function(r,t,n){if(!na(t))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),ia.call(r)==="[object Array]"?aa(r,t,i):typeof r=="string"?oa(r,t,i):sa(r,t,i)},fa=la,Er=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],ca=typeof globalThis>"u"?xt:globalThis,ua=function(){for(var r=[],t=0;t<Er.length;t++)typeof ca[Er[t]]=="function"&&(r[r.length]=Er[t]);return r},or=fa,ha=ua,mt=Nt,Hr=Dt,tr=Wr,da=Hr("Object.prototype.toString"),Wt=Gr(),yt=typeof globalThis>"u"?xt:globalThis,Br=ha(),Xr=Hr("String.prototype.slice"),Ar=Object.getPrototypeOf,ga=Hr("Array.prototype.indexOf",!0)||function(r,t){for(var n=0;n<r.length;n+=1)if(r[n]===t)return n;return-1},sr={__proto__:null};Wt&&tr&&Ar?or(Br,function(e){var r=new yt[e];if(Symbol.toStringTag in r){var t=Ar(r),n=tr(t,Symbol.toStringTag);if(!n){var i=Ar(t);n=tr(i,Symbol.toStringTag)}sr["$"+e]=mt(n.get)}}):or(Br,function(e){var r=new yt[e],t=r.slice||r.set;t&&(sr["$"+e]=mt(t))});var ma=function(r){var t=!1;return or(sr,function(n,i){if(!t)try{"$"+n(r)===i&&(t=Xr(i,1))}catch{}}),t},ya=function(r){var t=!1;return or(sr,function(n,i){if(!t)try{n(r),t=Xr(i,1)}catch{}}),t},Vt=function(r){if(!r||typeof r!="object")return!1;if(!Wt){var t=Xr(da(r),8,-1);return ga(Br,t)>-1?t:t!=="Object"?!1:ya(r)}return tr?ma(r):null},pa=Vt,ba=function(r){return!!pa(r)};(function(e){var r=Di,t=Wi,n=Vt,i=ba;function o(m){return m.call.bind(m)}var l=typeof BigInt<"u",u=typeof Symbol<"u",s=o(Object.prototype.toString),d=o(Number.prototype.valueOf),E=o(String.prototype.valueOf),I=o(Boolean.prototype.valueOf);if(l)var O=o(BigInt.prototype.valueOf);if(u)var z=o(Symbol.prototype.valueOf);function v(m,Jn){if(typeof m!="object")return!1;try{return Jn(m),!0}catch{return!1}}e.isArgumentsObject=r,e.isGeneratorFunction=t,e.isTypedArray=i;function M(m){return typeof Promise<"u"&&m instanceof Promise||m!==null&&typeof m=="object"&&typeof m.then=="function"&&typeof m.catch=="function"}e.isPromise=M;function L(m){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(m):i(m)||g(m)}e.isArrayBufferView=L;function G(m){return n(m)==="Uint8Array"}e.isUint8Array=G;function ne(m){return n(m)==="Uint8ClampedArray"}e.isUint8ClampedArray=ne;function J(m){return n(m)==="Uint16Array"}e.isUint16Array=J;function Ge(m){return n(m)==="Uint32Array"}e.isUint32Array=Ge;function pe(m){return n(m)==="Int8Array"}e.isInt8Array=pe;function dr(m){return n(m)==="Int16Array"}e.isInt16Array=dr;function Q(m){return n(m)==="Int32Array"}e.isInt32Array=Q;function ce(m){return n(m)==="Float32Array"}e.isFloat32Array=ce;function ie(m){return n(m)==="Float64Array"}e.isFloat64Array=ie;function be(m){return n(m)==="BigInt64Array"}e.isBigInt64Array=be;function ue(m){return n(m)==="BigUint64Array"}e.isBigUint64Array=ue;function K(m){return s(m)==="[object Map]"}K.working=typeof Map<"u"&&K(new Map);function gr(m){return typeof Map>"u"?!1:K.working?K(m):m instanceof Map}e.isMap=gr;function ae(m){return s(m)==="[object Set]"}ae.working=typeof Set<"u"&&ae(new Set);function Me(m){return typeof Set>"u"?!1:ae.working?ae(m):m instanceof Set}e.isSet=Me;function ve(m){return s(m)==="[object WeakMap]"}ve.working=typeof WeakMap<"u"&&ve(new WeakMap);function mr(m){return typeof WeakMap>"u"?!1:ve.working?ve(m):m instanceof WeakMap}e.isWeakMap=mr;function we(m){return s(m)==="[object WeakSet]"}we.working=typeof WeakSet<"u"&&we(new WeakSet);function Y(m){return we(m)}e.isWeakSet=Y;function Ee(m){return s(m)==="[object ArrayBuffer]"}Ee.working=typeof ArrayBuffer<"u"&&Ee(new ArrayBuffer);function qe(m){return typeof ArrayBuffer>"u"?!1:Ee.working?Ee(m):m instanceof ArrayBuffer}e.isArrayBuffer=qe;function c(m){return s(m)==="[object DataView]"}c.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&c(new DataView(new ArrayBuffer(1),0,1));function g(m){return typeof DataView>"u"?!1:c.working?c(m):m instanceof DataView}e.isDataView=g;var y=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function w(m){return s(m)==="[object SharedArrayBuffer]"}function j(m){return typeof y>"u"?!1:(typeof w.working>"u"&&(w.working=w(new y)),w.working?w(m):m instanceof y)}e.isSharedArrayBuffer=j;function k(m){return s(m)==="[object AsyncFunction]"}e.isAsyncFunction=k;function A(m){return s(m)==="[object Map Iterator]"}e.isMapIterator=A;function S(m){return s(m)==="[object Set Iterator]"}e.isSetIterator=S;function x(m){return s(m)==="[object Generator]"}e.isGeneratorObject=x;function N(m){return s(m)==="[object WebAssembly.Module]"}e.isWebAssemblyCompiledModule=N;function he(m){return v(m,d)}e.isNumberObject=he;function We(m){return v(m,E)}e.isStringObject=We;function Ae(m){return v(m,I)}e.isBooleanObject=Ae;function Ve(m){return l&&v(m,O)}e.isBigIntObject=Ve;function at(m){return u&&v(m,z)}e.isSymbolObject=at;function Hn(m){return he(m)||We(m)||Ae(m)||Ve(m)||at(m)}e.isBoxedPrimitive=Hn;function Xn(m){return typeof Uint8Array<"u"&&(qe(m)||j(m))}e.isAnyArrayBuffer=Xn,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(m){Object.defineProperty(e,m,{enumerable:!1,value:function(){throw new Error(m+" is not supported in userland")}})})})($t);var va=function(r){return r&&typeof r=="object"&&typeof r.copy=="function"&&typeof r.fill=="function"&&typeof r.readUInt8=="function"},Mr={exports:{}};typeof Object.create=="function"?Mr.exports=function(r,t){t&&(r.super_=t,r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:Mr.exports=function(r,t){if(t){r.super_=t;var n=function(){};n.prototype=t.prototype,r.prototype=new n,r.prototype.constructor=r}};var wa=Mr.exports;(function(e){var r=Object.getOwnPropertyDescriptors||function(g){for(var y=Object.keys(g),w={},j=0;j<y.length;j++)w[y[j]]=Object.getOwnPropertyDescriptor(g,y[j]);return w},t=/%[sdj%]/g;e.format=function(c){if(!pe(c)){for(var g=[],y=0;y<arguments.length;y++)g.push(l(arguments[y]));return g.join(" ")}for(var y=1,w=arguments,j=w.length,k=String(c).replace(t,function(S){if(S==="%%")return"%";if(y>=j)return S;switch(S){case"%s":return String(w[y++]);case"%d":return Number(w[y++]);case"%j":try{return JSON.stringify(w[y++])}catch{return"[Circular]"}default:return S}}),A=w[y];y<j;A=w[++y])ne(A)||!ie(A)?k+=" "+A:k+=" "+l(A);return k},e.deprecate=function(c,g){if(typeof process<"u"&&process.noDeprecation===!0)return c;if(typeof process>"u")return function(){return e.deprecate(c,g).apply(this,arguments)};var y=!1;function w(){if(!y){if(process.throwDeprecation)throw new Error(g);process.traceDeprecation?console.trace(g):console.error(g),y=!0}return c.apply(this,arguments)}return w};var n={},i=/^$/;if({}.NODE_DEBUG){var o={}.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+o+"$","i")}e.debuglog=function(c){if(c=c.toUpperCase(),!n[c])if(i.test(c)){var g=process.pid;n[c]=function(){var y=e.format.apply(e,arguments);console.error("%s %d: %s",c,g,y)}}else n[c]=function(){};return n[c]};function l(c,g){var y={seen:[],stylize:s};return arguments.length>=3&&(y.depth=arguments[2]),arguments.length>=4&&(y.colors=arguments[3]),G(g)?y.showHidden=g:g&&e._extend(y,g),Q(y.showHidden)&&(y.showHidden=!1),Q(y.depth)&&(y.depth=2),Q(y.colors)&&(y.colors=!1),Q(y.customInspect)&&(y.customInspect=!0),y.colors&&(y.stylize=u),E(y,c,y.depth)}e.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function u(c,g){var y=l.styles[g];return y?"\x1B["+l.colors[y][0]+"m"+c+"\x1B["+l.colors[y][1]+"m":c}function s(c,g){return c}function d(c){var g={};return c.forEach(function(y,w){g[y]=!0}),g}function E(c,g,y){if(c.customInspect&&g&&K(g.inspect)&&g.inspect!==e.inspect&&!(g.constructor&&g.constructor.prototype===g)){var w=g.inspect(y,c);return pe(w)||(w=E(c,w,y)),w}var j=I(c,g);if(j)return j;var k=Object.keys(g),A=d(k);if(c.showHidden&&(k=Object.getOwnPropertyNames(g)),ue(g)&&(k.indexOf("message")>=0||k.indexOf("description")>=0))return O(g);if(k.length===0){if(K(g)){var S=g.name?": "+g.name:"";return c.stylize("[Function"+S+"]","special")}if(ce(g))return c.stylize(RegExp.prototype.toString.call(g),"regexp");if(be(g))return c.stylize(Date.prototype.toString.call(g),"date");if(ue(g))return O(g)}var x="",N=!1,he=["{","}"];if(L(g)&&(N=!0,he=["[","]"]),K(g)){var We=g.name?": "+g.name:"";x=" [Function"+We+"]"}if(ce(g)&&(x=" "+RegExp.prototype.toString.call(g)),be(g)&&(x=" "+Date.prototype.toUTCString.call(g)),ue(g)&&(x=" "+O(g)),k.length===0&&(!N||g.length==0))return he[0]+x+he[1];if(y<0)return ce(g)?c.stylize(RegExp.prototype.toString.call(g),"regexp"):c.stylize("[Object]","special");c.seen.push(g);var Ae;return N?Ae=z(c,g,y,A,k):Ae=k.map(function(Ve){return v(c,g,y,A,Ve,N)}),c.seen.pop(),M(Ae,x,he)}function I(c,g){if(Q(g))return c.stylize("undefined","undefined");if(pe(g)){var y="'"+JSON.stringify(g).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return c.stylize(y,"string")}if(Ge(g))return c.stylize(""+g,"number");if(G(g))return c.stylize(""+g,"boolean");if(ne(g))return c.stylize("null","null")}function O(c){return"["+Error.prototype.toString.call(c)+"]"}function z(c,g,y,w,j){for(var k=[],A=0,S=g.length;A<S;++A)we(g,String(A))?k.push(v(c,g,y,w,String(A),!0)):k.push("");return j.forEach(function(x){x.match(/^\d+$/)||k.push(v(c,g,y,w,x,!0))}),k}function v(c,g,y,w,j,k){var A,S,x;if(x=Object.getOwnPropertyDescriptor(g,j)||{value:g[j]},x.get?x.set?S=c.stylize("[Getter/Setter]","special"):S=c.stylize("[Getter]","special"):x.set&&(S=c.stylize("[Setter]","special")),we(w,j)||(A="["+j+"]"),S||(c.seen.indexOf(x.value)<0?(ne(y)?S=E(c,x.value,null):S=E(c,x.value,y-1),S.indexOf(`
`)>-1&&(k?S=S.split(`
`).map(function(N){return"  "+N}).join(`
`).slice(2):S=`
`+S.split(`
`).map(function(N){return"   "+N}).join(`
`))):S=c.stylize("[Circular]","special")),Q(A)){if(k&&j.match(/^\d+$/))return S;A=JSON.stringify(""+j),A.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(A=A.slice(1,-1),A=c.stylize(A,"name")):(A=A.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),A=c.stylize(A,"string"))}return A+": "+S}function M(c,g,y){var w=c.reduce(function(j,k){return k.indexOf(`
`)>=0,j+k.replace(/\u001b\[\d\d?m/g,"").length+1},0);return w>60?y[0]+(g===""?"":g+`
 `)+" "+c.join(`,
  `)+" "+y[1]:y[0]+g+" "+c.join(", ")+" "+y[1]}e.types=$t;function L(c){return Array.isArray(c)}e.isArray=L;function G(c){return typeof c=="boolean"}e.isBoolean=G;function ne(c){return c===null}e.isNull=ne;function J(c){return c==null}e.isNullOrUndefined=J;function Ge(c){return typeof c=="number"}e.isNumber=Ge;function pe(c){return typeof c=="string"}e.isString=pe;function dr(c){return typeof c=="symbol"}e.isSymbol=dr;function Q(c){return c===void 0}e.isUndefined=Q;function ce(c){return ie(c)&&ae(c)==="[object RegExp]"}e.isRegExp=ce,e.types.isRegExp=ce;function ie(c){return typeof c=="object"&&c!==null}e.isObject=ie;function be(c){return ie(c)&&ae(c)==="[object Date]"}e.isDate=be,e.types.isDate=be;function ue(c){return ie(c)&&(ae(c)==="[object Error]"||c instanceof Error)}e.isError=ue,e.types.isNativeError=ue;function K(c){return typeof c=="function"}e.isFunction=K;function gr(c){return c===null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||typeof c=="symbol"||typeof c>"u"}e.isPrimitive=gr,e.isBuffer=va;function ae(c){return Object.prototype.toString.call(c)}function Me(c){return c<10?"0"+c.toString(10):c.toString(10)}var ve=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function mr(){var c=new Date,g=[Me(c.getHours()),Me(c.getMinutes()),Me(c.getSeconds())].join(":");return[c.getDate(),ve[c.getMonth()],g].join(" ")}e.log=function(){console.log("%s - %s",mr(),e.format.apply(e,arguments))},e.inherits=wa,e._extend=function(c,g){if(!g||!ie(g))return c;for(var y=Object.keys(g),w=y.length;w--;)c[y[w]]=g[y[w]];return c};function we(c,g){return Object.prototype.hasOwnProperty.call(c,g)}var Y=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;e.promisify=function(g){if(typeof g!="function")throw new TypeError('The "original" argument must be of type Function');if(Y&&g[Y]){var y=g[Y];if(typeof y!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(y,Y,{value:y,enumerable:!1,writable:!1,configurable:!0}),y}function y(){for(var w,j,k=new Promise(function(x,N){w=x,j=N}),A=[],S=0;S<arguments.length;S++)A.push(arguments[S]);A.push(function(x,N){x?j(x):w(N)});try{g.apply(this,A)}catch(x){j(x)}return k}return Object.setPrototypeOf(y,Object.getPrototypeOf(g)),Y&&Object.defineProperty(y,Y,{value:y,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(y,r(g))},e.promisify.custom=Y;function Ee(c,g){if(!c){var y=new Error("Promise was rejected with a falsy value");y.reason=c,c=y}return g(c)}function qe(c){if(typeof c!="function")throw new TypeError('The "original" argument must be of type Function');function g(){for(var y=[],w=0;w<arguments.length;w++)y.push(arguments[w]);var j=y.pop();if(typeof j!="function")throw new TypeError("The last argument must be of type Function");var k=this,A=function(){return j.apply(k,arguments)};c.apply(this,y).then(function(S){process.nextTick(A.bind(null,null,S))},function(S){process.nextTick(Ee.bind(null,S,A))})}return Object.setPrototypeOf(g,Object.getPrototypeOf(c)),Object.defineProperties(g,r(c)),g}e.callbackify=qe})(Ot);const Ea={},Aa=Object.freeze(Object.defineProperty({__proto__:null,default:Ea},Symbol.toStringTag,{value:"Module"})),q=Qn(Aa),Ht=function(e){return typeof e<"u"&&e!==null},Pa=function(e){return typeof e=="object"},Sa=function(e){return Object.prototype.toString.call(e)==="[object Object]"},Ia=function(e){return typeof e=="function"},ja=function(e){return typeof e=="boolean"},ka=function(e){return e instanceof Buffer},Ra=function(e){if(Ht(e))switch(e.constructor){case Uint8Array:case Uint8ClampedArray:case Int8Array:case Uint16Array:case Int16Array:case Uint32Array:case Int32Array:case Float32Array:case Float64Array:return!0}return!1},xa=function(e){return e instanceof ArrayBuffer},Oa=function(e){return typeof e=="string"&&e.length>0},$a=function(e){return typeof e=="number"&&!Number.isNaN(e)},Fa=function(e){return Number.isInteger(e)},Ta=function(e,r,t){return e>=r&&e<=t},Ba=function(e,r){return r.includes(e)},Ma=function(e,r,t){return new Error(`Expected ${r} for ${e} but received ${t} of type ${typeof t}`)};var re={defined:Ht,object:Pa,plainObject:Sa,fn:Ia,bool:ja,buffer:ka,typedArray:Ra,arrayBuffer:xa,string:Oa,number:$a,integer:Fa,inRange:Ta,inArray:Ba,invalidParameterError:Ma};const La=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Xt=La;const Na="2.0.0",Jt=256,_a=Number.MAX_SAFE_INTEGER||9007199254740991,Ca=16,Da=Jt-6,za=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Qt={MAX_LENGTH:Jt,MAX_SAFE_COMPONENT_LENGTH:Ca,MAX_SAFE_BUILD_LENGTH:Da,MAX_SAFE_INTEGER:_a,RELEASE_TYPES:za,SEMVER_SPEC_VERSION:Na,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Lr={exports:{}};(function(e,r){const{MAX_SAFE_COMPONENT_LENGTH:t,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=Qt,o=Xt;r=e.exports={};const l=r.re=[],u=r.safeRe=[],s=r.src=[],d=r.t={};let E=0;const I="[a-zA-Z0-9-]",O=[["\\s",1],["\\d",i],[I,n]],z=M=>{for(const[L,G]of O)M=M.split(`${L}*`).join(`${L}{0,${G}}`).split(`${L}+`).join(`${L}{1,${G}}`);return M},v=(M,L,G)=>{const ne=z(L),J=E++;o(M,J,L),d[M]=J,s[J]=L,l[J]=new RegExp(L,G?"g":void 0),u[J]=new RegExp(ne,G?"g":void 0)};v("NUMERICIDENTIFIER","0|[1-9]\\d*"),v("NUMERICIDENTIFIERLOOSE","\\d+"),v("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${I}*`),v("MAINVERSION",`(${s[d.NUMERICIDENTIFIER]})\\.(${s[d.NUMERICIDENTIFIER]})\\.(${s[d.NUMERICIDENTIFIER]})`),v("MAINVERSIONLOOSE",`(${s[d.NUMERICIDENTIFIERLOOSE]})\\.(${s[d.NUMERICIDENTIFIERLOOSE]})\\.(${s[d.NUMERICIDENTIFIERLOOSE]})`),v("PRERELEASEIDENTIFIER",`(?:${s[d.NUMERICIDENTIFIER]}|${s[d.NONNUMERICIDENTIFIER]})`),v("PRERELEASEIDENTIFIERLOOSE",`(?:${s[d.NUMERICIDENTIFIERLOOSE]}|${s[d.NONNUMERICIDENTIFIER]})`),v("PRERELEASE",`(?:-(${s[d.PRERELEASEIDENTIFIER]}(?:\\.${s[d.PRERELEASEIDENTIFIER]})*))`),v("PRERELEASELOOSE",`(?:-?(${s[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[d.PRERELEASEIDENTIFIERLOOSE]})*))`),v("BUILDIDENTIFIER",`${I}+`),v("BUILD",`(?:\\+(${s[d.BUILDIDENTIFIER]}(?:\\.${s[d.BUILDIDENTIFIER]})*))`),v("FULLPLAIN",`v?${s[d.MAINVERSION]}${s[d.PRERELEASE]}?${s[d.BUILD]}?`),v("FULL",`^${s[d.FULLPLAIN]}$`),v("LOOSEPLAIN",`[v=\\s]*${s[d.MAINVERSIONLOOSE]}${s[d.PRERELEASELOOSE]}?${s[d.BUILD]}?`),v("LOOSE",`^${s[d.LOOSEPLAIN]}$`),v("GTLT","((?:<|>)?=?)"),v("XRANGEIDENTIFIERLOOSE",`${s[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),v("XRANGEIDENTIFIER",`${s[d.NUMERICIDENTIFIER]}|x|X|\\*`),v("XRANGEPLAIN",`[v=\\s]*(${s[d.XRANGEIDENTIFIER]})(?:\\.(${s[d.XRANGEIDENTIFIER]})(?:\\.(${s[d.XRANGEIDENTIFIER]})(?:${s[d.PRERELEASE]})?${s[d.BUILD]}?)?)?`),v("XRANGEPLAINLOOSE",`[v=\\s]*(${s[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[d.XRANGEIDENTIFIERLOOSE]})(?:${s[d.PRERELEASELOOSE]})?${s[d.BUILD]}?)?)?`),v("XRANGE",`^${s[d.GTLT]}\\s*${s[d.XRANGEPLAIN]}$`),v("XRANGELOOSE",`^${s[d.GTLT]}\\s*${s[d.XRANGEPLAINLOOSE]}$`),v("COERCE",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?(?:$|[^\\d])`),v("COERCERTL",s[d.COERCE],!0),v("LONETILDE","(?:~>?)"),v("TILDETRIM",`(\\s*)${s[d.LONETILDE]}\\s+`,!0),r.tildeTrimReplace="$1~",v("TILDE",`^${s[d.LONETILDE]}${s[d.XRANGEPLAIN]}$`),v("TILDELOOSE",`^${s[d.LONETILDE]}${s[d.XRANGEPLAINLOOSE]}$`),v("LONECARET","(?:\\^)"),v("CARETTRIM",`(\\s*)${s[d.LONECARET]}\\s+`,!0),r.caretTrimReplace="$1^",v("CARET",`^${s[d.LONECARET]}${s[d.XRANGEPLAIN]}$`),v("CARETLOOSE",`^${s[d.LONECARET]}${s[d.XRANGEPLAINLOOSE]}$`),v("COMPARATORLOOSE",`^${s[d.GTLT]}\\s*(${s[d.LOOSEPLAIN]})$|^$`),v("COMPARATOR",`^${s[d.GTLT]}\\s*(${s[d.FULLPLAIN]})$|^$`),v("COMPARATORTRIM",`(\\s*)${s[d.GTLT]}\\s*(${s[d.LOOSEPLAIN]}|${s[d.XRANGEPLAIN]})`,!0),r.comparatorTrimReplace="$1$2$3",v("HYPHENRANGE",`^\\s*(${s[d.XRANGEPLAIN]})\\s+-\\s+(${s[d.XRANGEPLAIN]})\\s*$`),v("HYPHENRANGELOOSE",`^\\s*(${s[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[d.XRANGEPLAINLOOSE]})\\s*$`),v("STAR","(<|>)?=?\\s*\\*"),v("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),v("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Lr,Lr.exports);var Kt=Lr.exports;const Ua=Object.freeze({loose:!0}),Ga=Object.freeze({}),qa=e=>e?typeof e!="object"?Ua:e:Ga;var Wa=qa;const pt=/^[0-9]+$/,Yt=(e,r)=>{const t=pt.test(e),n=pt.test(r);return t&&n&&(e=+e,r=+r),e===r?0:t&&!n?-1:n&&!t?1:e<r?-1:1},Va=(e,r)=>Yt(r,e);var Ha={compareIdentifiers:Yt,rcompareIdentifiers:Va};const He=Xt,{MAX_LENGTH:bt,MAX_SAFE_INTEGER:Xe}=Qt,{safeRe:vt,t:wt}=Kt,Xa=Wa,{compareIdentifiers:Ie}=Ha;let Ja=class W{constructor(r,t){if(t=Xa(t),r instanceof W){if(r.loose===!!t.loose&&r.includePrerelease===!!t.includePrerelease)return r;r=r.version}else if(typeof r!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof r}".`);if(r.length>bt)throw new TypeError(`version is longer than ${bt} characters`);He("SemVer",r,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=r.trim().match(t.loose?vt[wt.LOOSE]:vt[wt.FULL]);if(!n)throw new TypeError(`Invalid Version: ${r}`);if(this.raw=r,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Xe||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Xe||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Xe||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<Xe)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(r){if(He("SemVer.compare",this.version,this.options,r),!(r instanceof W)){if(typeof r=="string"&&r===this.version)return 0;r=new W(r,this.options)}return r.version===this.version?0:this.compareMain(r)||this.comparePre(r)}compareMain(r){return r instanceof W||(r=new W(r,this.options)),Ie(this.major,r.major)||Ie(this.minor,r.minor)||Ie(this.patch,r.patch)}comparePre(r){if(r instanceof W||(r=new W(r,this.options)),this.prerelease.length&&!r.prerelease.length)return-1;if(!this.prerelease.length&&r.prerelease.length)return 1;if(!this.prerelease.length&&!r.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],i=r.prerelease[t];if(He("prerelease compare",t,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Ie(n,i)}while(++t)}compareBuild(r){r instanceof W||(r=new W(r,this.options));let t=0;do{const n=this.build[t],i=r.build[t];if(He("prerelease compare",t,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Ie(n,i)}while(++t)}inc(r,t,n){switch(r){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(n)?1:0;if(!t&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(t===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(t){let o=[t,i];n===!1&&(o=[t]),Ie(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${r}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Jr=Ja;const Et=Jr,Qa=(e,r,t=!1)=>{if(e instanceof Et)return e;try{return new Et(e,r)}catch(n){if(!t)return null;throw n}};var Ka=Qa;const Ya=Jr,Za=Ka,{safeRe:Je,t:Qe}=Kt,eo=(e,r)=>{if(e instanceof Ya)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;r=r||{};let t=null;if(!r.rtl)t=e.match(Je[Qe.COERCE]);else{let n;for(;(n=Je[Qe.COERCERTL].exec(e))&&(!t||t.index+t[0].length!==e.length);)(!t||n.index+n[0].length!==t.index+t[0].length)&&(t=n),Je[Qe.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Je[Qe.COERCERTL].lastIndex=-1}return t===null?null:Za(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,r)};var ro=eo;const At=Jr,to=(e,r,t)=>new At(e,t).compare(new At(r,t));var no=to;const io=no,ao=(e,r,t)=>io(e,r,t)>=0;var oo=ao;const Zt=()=>process.platform==="linux";let Pr=null;const so=()=>(Pr||(Pr=Zt()&&process.report?process.report.getReport():{}),Pr);var lo={isLinux:Zt,getReport:so};const en=q,fo="/usr/bin/ldd",co=e=>en.readFileSync(e,"utf-8"),uo=e=>new Promise((r,t)=>{en.readFile(e,"utf-8",(n,i)=>{n?t(n):r(i)})});var ho={LDD_PATH:fo,readFileSync:co,readFile:uo};const rn=q,{isLinux:Be,getReport:tn}=lo,{LDD_PATH:hr,readFile:nn,readFileSync:an}=ho;let V,H;const on="getconf GNU_LIBC_VERSION 2>&1 || true; ldd --version 2>&1 || true";let oe="";const sn=()=>oe||new Promise(e=>{rn.exec(on,(r,t)=>{oe=r?" ":t,e(oe)})}),ln=()=>{if(!oe)try{oe=rn.execSync(on,{encoding:"utf8"})}catch{oe=" "}return oe},ee="glibc",fn=/GLIBC\s(\d+\.\d+)/,ye="musl",go=ee.toUpperCase(),mo=ye.toLowerCase(),yo=e=>e.includes("libc.musl-")||e.includes("ld-musl-"),cn=()=>{const e=tn();return e.header&&e.header.glibcVersionRuntime?ee:Array.isArray(e.sharedObjects)&&e.sharedObjects.some(yo)?ye:null},un=e=>{const[r,t]=e.split(/[\r\n]+/);return r&&r.includes(ee)?ee:t&&t.includes(ye)?ye:null},hn=e=>e.includes(mo)?ye:e.includes(go)?ee:null,po=async()=>{if(V!==void 0)return V;V=null;try{const e=await nn(hr);V=hn(e)}catch{}return V},bo=()=>{if(V!==void 0)return V;V=null;try{const e=an(hr);V=hn(e)}catch{}return V},dn=async()=>{let e=null;if(Be()&&(e=await po(),e||(e=cn()),!e)){const r=await sn();e=un(r)}return e},gn=()=>{let e=null;if(Be()&&(e=bo(),e||(e=cn()),!e)){const r=ln();e=un(r)}return e},vo=async()=>Be()&&await dn()!==ee,wo=()=>Be()&&gn()!==ee,Eo=async()=>{if(H!==void 0)return H;H=null;try{const r=(await nn(hr)).match(fn);r&&(H=r[1])}catch{}return H},Ao=()=>{if(H!==void 0)return H;H=null;try{const r=an(hr).match(fn);r&&(H=r[1])}catch{}return H},mn=()=>{const e=tn();return e.header&&e.header.glibcVersionRuntime?e.header.glibcVersionRuntime:null},Pt=e=>e.trim().split(/\s+/)[1],yn=e=>{const[r,t,n]=e.split(/[\r\n]+/);return r&&r.includes(ee)?Pt(r):t&&n&&t.includes(ye)?Pt(n):null},Po=async()=>{let e=null;if(Be()&&(e=await Eo(),e||(e=mn()),!e)){const r=await sn();e=yn(r)}return e},So=()=>{let e=null;if(Be()&&(e=Ao(),e||(e=mn()),!e)){const r=ln();e=yn(r)}return e};var pn={GLIBC:ee,MUSL:ye,family:dn,familySync:gn,isNonGlibcLinux:vo,isNonGlibcLinuxSync:wo,version:Po,versionSync:So};const Sr=pn,Ke=process.env;var Qr=function(){const e=Ke.npm_config_arch||process.arch,r=Ke.npm_config_platform||process.platform,t={}.npm_config_libc||(Sr.isNonGlibcLinuxSync()?Sr.familySync():""),n=r!=="linux"||t===Sr.GLIBC?"":t,i=[`${r}${n}`];if(e==="arm"){const o=process.versions.electron?"7":"6";i.push(`armv${Ke.npm_config_arm_version||process.config.variables.arm_version||o}`)}else e==="arm64"?i.push(`arm64v${Ke.npm_config_arm_version||"8"}`):i.push(e);return i.join("-")};const Io="sharp",jo="High performance Node.js image processing, the fastest module to resize JPEG, PNG, WebP, GIF, AVIF and TIFF images",ko="0.32.6",Ro="Lovell Fuller <npm@lovell.info>",xo="https://github.com/lovell/sharp",Oo=["Pierre Inglebert <pierre.inglebert@gmail.com>","Jonathan Ong <jonathanrichardong@gmail.com>","Chanon Sajjamanochai <chanon.s@gmail.com>","Juliano Julio <julianojulio@gmail.com>","Daniel Gasienica <daniel@gasienica.ch>","Julian Walker <julian@fiftythree.com>","Amit Pitaru <pitaru.amit@gmail.com>","Brandon Aaron <hello.brandon@aaron.sh>","Andreas Lind <andreas@one.com>","Maurus Cuelenaere <mcuelenaere@gmail.com>","Linus Unnebäck <linus@folkdatorn.se>","Victor Mateevitsi <mvictoras@gmail.com>","Alaric Holloway <alaric.holloway@gmail.com>","Bernhard K. Weisshuhn <bkw@codingforce.com>","Chris Riley <criley@primedia.com>","David Carley <dacarley@gmail.com>","John Tobin <john@limelightmobileinc.com>","Kenton Gray <kentongray@gmail.com>","Felix Bünemann <Felix.Buenemann@gmail.com>","Samy Al Zahrani <samyalzahrany@gmail.com>","Chintan Thakkar <lemnisk8@gmail.com>","F. Orlando Galashan <frulo@gmx.de>","Kleis Auke Wolthuizen <info@kleisauke.nl>","Matt Hirsch <mhirsch@media.mit.edu>","Matthias Thoemmes <thoemmes@gmail.com>","Patrick Paskaris <patrick@paskaris.gr>","Jérémy Lal <kapouer@melix.org>","Rahul Nanwani <r.nanwani@gmail.com>","Alice Monday <alice0meta@gmail.com>","Kristo Jorgenson <kristo.jorgenson@gmail.com>","YvesBos <yves_bos@outlook.com>","Guy Maliar <guy@tailorbrands.com>","Nicolas Coden <nicolas@ncoden.fr>","Matt Parrish <matt.r.parrish@gmail.com>","Marcel Bretschneider <marcel.bretschneider@gmail.com>","Matthew McEachen <matthew+github@mceachen.org>","Jarda Kotěšovec <jarda.kotesovec@gmail.com>","Kenric D'Souza <kenric.dsouza@gmail.com>","Oleh Aleinyk <oleg.aleynik@gmail.com>","Marcel Bretschneider <marcel.bretschneider@gmail.com>","Andrea Bianco <andrea.bianco@unibas.ch>","Rik Heywood <rik@rik.org>","Thomas Parisot <hi@oncletom.io>","Nathan Graves <nathanrgraves+github@gmail.com>","Tom Lokhorst <tom@lokhorst.eu>","Espen Hovlandsdal <espen@hovlandsdal.com>","Sylvain Dumont <sylvain.dumont35@gmail.com>","Alun Davies <alun.owain.davies@googlemail.com>","Aidan Hoolachan <ajhoolachan21@gmail.com>","Axel Eirola <axel.eirola@iki.fi>","Freezy <freezy@xbmc.org>","Daiz <taneli.vatanen@gmail.com>","Julian Aubourg <j@ubourg.net>","Keith Belovay <keith@picthrive.com>","Michael B. Klein <mbklein@gmail.com>","Jordan Prudhomme <jordan@raboland.fr>","Ilya Ovdin <iovdin@gmail.com>","Andargor <andargor@yahoo.com>","Paul Neave <paul.neave@gmail.com>","Brendan Kennedy <brenwken@gmail.com>","Brychan Bennett-Odlum <git@brychan.io>","Edward Silverton <e.silverton@gmail.com>","Roman Malieiev <aromaleev@gmail.com>","Tomas Szabo <tomas.szabo@deftomat.com>","Robert O'Rourke <robert@o-rourke.org>","Guillermo Alfonso Varela Chouciño <guillevch@gmail.com>","Christian Flintrup <chr@gigahost.dk>","Manan Jadhav <manan@motionden.com>","Leon Radley <leon@radley.se>","alza54 <alza54@thiocod.in>","Jacob Smith <jacob@frende.me>","Michael Nutt <michael@nutt.im>","Brad Parham <baparham@gmail.com>","Taneli Vatanen <taneli.vatanen@gmail.com>","Joris Dugué <zaruike10@gmail.com>","Chris Banks <christopher.bradley.banks@gmail.com>","Ompal Singh <ompal.hitm09@gmail.com>","Brodan <christopher.hranj@gmail.com","Ankur Parihar <ankur.github@gmail.com>","Brahim Ait elhaj <brahima@gmail.com>","Mart Jansink <m.jansink@gmail.com>","Lachlan Newman <lachnewman007@gmail.com>"],$o={install:"(node install/libvips && node install/dll-copy && prebuild-install) || (node install/can-compile && node-gyp rebuild && node install/dll-copy)",clean:"rm -rf node_modules/ build/ vendor/ .nyc_output/ coverage/ test/fixtures/output.*",test:"npm run test-lint && npm run test-unit && npm run test-licensing && npm run test-types","test-lint":"semistandard && cpplint","test-unit":"nyc --reporter=lcov --reporter=text --check-coverage --branches=100 mocha","test-licensing":'license-checker --production --summary --onlyAllow="Apache-2.0;BSD;ISC;MIT"',"test-leak":"./test/leak/leak.sh","test-types":"tsd","docs-build":"node docs/build && node docs/search-index/build","docs-serve":"cd docs && npx serve","docs-publish":"cd docs && npx firebase-tools deploy --project pixelplumbing --only hosting:pixelplumbing-sharp"},Fo="lib/index.js",To="lib/index.d.ts",Bo=["binding.gyp","install/**","lib/**","src/**"],Mo={type:"git",url:"git://github.com/lovell/sharp"},Lo=["jpeg","png","webp","avif","tiff","gif","svg","jp2","dzi","image","resize","thumbnail","crop","embed","libvips","vips"],No={color:"^4.2.3","detect-libc":"^2.0.2","node-addon-api":"^6.1.0","prebuild-install":"^7.1.1",semver:"^7.5.4","simple-get":"^4.0.1","tar-fs":"^3.0.4","tunnel-agent":"^0.6.0"},_o={"@types/node":"*",async:"^3.2.4",cc:"^3.0.1","exif-reader":"^1.2.0","extract-zip":"^2.0.1",icc:"^3.0.0","jsdoc-to-markdown":"^8.0.0","license-checker":"^25.0.1",mocha:"^10.2.0","mock-fs":"^5.2.0",nyc:"^15.1.0",prebuild:"^12.0.0",semistandard:"^16.0.1",tsd:"^0.29.0"},Co="Apache-2.0",Do={libvips:"8.14.5",integrity:{"darwin-arm64v8":"sha512-1QZzICfCJd4wAO0P6qmYI5e5VFMt9iCE4QgefI8VMMbdSzjIXA9L/ARN6pkMQPZ3h20Y9RtJ2W1skgCsvCIccw==","darwin-x64":"sha512-sMIKMYXsdU9FlIfztj6Kt/SfHlhlDpP0Ups7ftVFqwjaszmYmpI9y/d/q3mLb4jrzuSiSUEislSWCwBnW7MPTw==","linux-arm64v8":"sha512-CD8owELzkDumaom+O3jJ8fKamILAQdj+//KK/VNcHK3sngUcFpdjx36C8okwbux9sml/T7GTB/gzpvReDrAejQ==","linux-armv6":"sha512-wk6IPHatDFVWKJy7lI1TJezHGHPQut1wF2bwx256KlZwXUQU3fcVcMpV1zxXjgLFewHq2+uhyMkoSGBPahWzlA==","linux-armv7":"sha512-HEZC9KYtkmBK5rUR2MqBhrVarnQVZ/TwLUeLkKq0XuoM2pc/eXI6N0Fh5NGEFwdXI2XE8g1ySf+OYS6DDi+xCQ==","linux-x64":"sha512-SlFWrITSW5XVUkaFPQOySAaSGXnhkGJCj8X2wGYYta9hk5piZldQyMp4zwy0z6UeRu1qKTKtZvmq28W3Gnh9xA==","linuxmusl-arm64v8":"sha512-ga9iX7WUva3sG/VsKkOD318InLlCfPIztvzCZKZ2/+izQXRbQi8VoXWMHgEN4KHACv45FTl7mJ/8CRqUzhS8wQ==","linuxmusl-x64":"sha512-yeaHnpfee1hrZLok2l4eFceHzlfq8gN3QOu0R4Mh8iMK5O5vAUu97bdtxeZZeJJvHw8tfh2/msGi0qysxKN8bw==","win32-arm64v8":"sha512-kR91hy9w1+GEXK56hLh51+hBCBo7T+ijM4Slkmvb/2PsYZySq5H7s61n99iDYl6kTJP2y9sW5Xcvm3uuXDaDgg==","win32-ia32":"sha512-HrnofEbzHNpHJ0vVnjsTj5yfgVdcqdWshXuwFO2zc8xlEjA83BvXZ0lVj9MxPxkxJ2ta+/UlLr+CFzc5bOceMw==","win32-x64":"sha512-BwKckinJZ0Fu/EcunqiLPwOLEBWp4xf8GV7nvmVuKKz5f6B+GxoA2k9aa2wueqv4r4RJVgV/aWXZWFKOIjre/Q=="},runtime:"napi",target:7},zo={node:">=14.15.0"},Uo={url:"https://opencollective.com/libvips"},Go={napi_versions:[7]},qo={env:["mocha"]},Wo={linelength:"120",filter:["build/include"]},Vo={directory:"test/types/"},bn={name:Io,description:jo,version:ko,author:Ro,homepage:xo,contributors:Oo,scripts:$o,main:Fo,types:To,files:Bo,repository:Mo,keywords:Lo,dependencies:No,devDependencies:_o,license:Co,config:Do,engines:zo,funding:Uo,binary:Go,semistandard:qo,cc:Wo,tsd:Vo},Kr=q,Ho=q,nr=q,Yr=q.spawnSync,Xo=ro,Jo=oo,Qo=Qr,{config:vn}=bn,le=process.env,wn=le.npm_package_config_libvips||vn.libvips,Zr=Xo(wn).version,et={encoding:"utf8",shell:!0},En=nr.join(__dirname,"..","vendor",Zr,Qo()),Nr=function(e){try{Kr.mkdirSync(e,{recursive:!0})}catch(r){if(r.code!=="EEXIST")throw r}},Ko=function(){const e=le.npm_config_cache||(le.APPDATA?nr.join(le.APPDATA,"npm-cache"):nr.join(Ho.homedir(),".npm"));Nr(e);const r=nr.join(e,"_libvips");return Nr(r),r},Yo=function(e){return le[`npm_package_config_integrity_${e.replace("-","_")}`]||vn.integrity[e]},An=function(e){e instanceof Error?console.error(`sharp: Installation error: ${e.message}`):console.log(`sharp: ${e}`)},Zo=function(){return process.platform==="darwin"&&process.arch==="x64"?(Yr("sysctl sysctl.proc_translated",et).stdout||"").trim()==="sysctl.proc_translated: 1":!1},Pn=function(){return process.platform!=="win32"?(Yr("pkg-config --modversion vips-cpp",{...et,env:{...le,PKG_CONFIG_PATH:Sn()}}).stdout||"").trim():""},es=function(){return Kr.existsSync(En)},rs=function(){Kr.rmSync(En,{recursive:!0,maxRetries:3,force:!0})},Sn=function(){return process.platform!=="win32"?[(Yr('which brew >/dev/null 2>&1 && brew environment --plain | grep PKG_CONFIG_LIBDIR | cut -d" " -f2',et).stdout||"").trim(),le.PKG_CONFIG_PATH,"/usr/local/lib/pkgconfig","/usr/lib/pkgconfig","/usr/local/libdata/pkgconfig","/usr/libdata/pkgconfig"].filter(Boolean).join(":"):""},ts=function(){if(le.SHARP_IGNORE_GLOBAL_LIBVIPS)return!1;if(Zo())return An("Detected Rosetta, skipping search for globally-installed libvips"),!1;const e=Pn();return!!e&&Jo(e,Zr)};var ns={minimumLibvipsVersion:Zr,minimumLibvipsVersionLabelled:wn,cachePath:Ko,integrity:Yo,log:An,globalLibvipsVersion:Pn,hasVendoredLibvips:es,removeVendoredLibvips:rs,pkgConfigPath:Sn,useGlobalLibvips:ts,mkdirSync:Nr};function In(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jn={exports:{}};const Ir=Qr();try{jn.exports=In(`../build/Release/sharp-${Ir}.node`)}catch(e){const r=["",'Something went wrong installing the "sharp" module',"",e.message,"","Possible solutions:"];if(/dylib/.test(e.message)&&/Incompatible library version/.test(e.message))r.push('- Update Homebrew: "brew update && brew upgrade vips"');else{const[t,n]=Ir.split("-");t==="linux"&&/Module did not self-register/.test(e.message)&&r.push("- Using worker threads? See https://sharp.pixelplumbing.com/install#worker-threads"),r.push('- Install with verbose logging and look for errors: "npm install --ignore-scripts=false --foreground-scripts --verbose sharp"',`- Install for the current ${Ir} runtime: "npm install --platform=${t} --arch=${n} sharp"`)}if(r.push("- Consult the installation documentation: https://sharp.pixelplumbing.com/install"),process.platform==="win32"||/symbol/.test(e.message)){const t=Object.keys(require.cache).find(n=>/[\\/]build[\\/]Release[\\/]sharp(.*)\.node$/.test(n));if(t){const[,n]=t.match(/node_modules[\\/]([^\\/]+)[\\/]/);r.push(`- Ensure the version of sharp aligns with the ${n} package: "npm ls sharp"`)}}throw new Error(r.join(`
`))}var rt=jn.exports;const is=Ot,tt=q,as=re;ns.hasVendoredLibvips();const os=is.debuglog("sharp"),me=function(e,r){if(arguments.length===1&&!as.defined(e))throw new Error("Invalid input");return this instanceof me?(tt.Duplex.call(this),this.options={topOffsetPre:-1,leftOffsetPre:-1,widthPre:-1,heightPre:-1,topOffsetPost:-1,leftOffsetPost:-1,widthPost:-1,heightPost:-1,width:-1,height:-1,canvas:"crop",position:0,resizeBackground:[0,0,0,255],useExifOrientation:!1,angle:0,rotationAngle:0,rotationBackground:[0,0,0,255],rotateBeforePreExtract:!1,flip:!1,flop:!1,extendTop:0,extendBottom:0,extendLeft:0,extendRight:0,extendBackground:[0,0,0,255],extendWith:"background",withoutEnlargement:!1,withoutReduction:!1,affineMatrix:[],affineBackground:[0,0,0,255],affineIdx:0,affineIdy:0,affineOdx:0,affineOdy:0,affineInterpolator:this.constructor.interpolators.bilinear,kernel:"lanczos3",fastShrinkOnLoad:!0,tintA:128,tintB:128,flatten:!1,flattenBackground:[0,0,0],unflatten:!1,negate:!1,negateAlpha:!0,medianSize:0,blurSigma:0,sharpenSigma:0,sharpenM1:1,sharpenM2:2,sharpenX1:2,sharpenY2:10,sharpenY3:20,threshold:0,thresholdGrayscale:!0,trimBackground:[],trimThreshold:0,gamma:0,gammaOut:0,greyscale:!1,normalise:!1,normaliseLower:1,normaliseUpper:99,claheWidth:0,claheHeight:0,claheMaxSlope:3,brightness:1,saturation:1,hue:0,lightness:0,booleanBufferIn:null,booleanFileIn:"",joinChannelIn:[],extractChannel:-1,removeAlpha:!1,ensureAlpha:-1,colourspace:"srgb",colourspaceInput:"last",composite:[],fileOut:"",formatOut:"input",streamOut:!1,withMetadata:!1,withMetadataOrientation:-1,withMetadataDensity:0,withMetadataIcc:"",withMetadataStrs:{},resolveWithObject:!1,jpegQuality:80,jpegProgressive:!1,jpegChromaSubsampling:"4:2:0",jpegTrellisQuantisation:!1,jpegOvershootDeringing:!1,jpegOptimiseScans:!1,jpegOptimiseCoding:!0,jpegQuantisationTable:0,pngProgressive:!1,pngCompressionLevel:6,pngAdaptiveFiltering:!1,pngPalette:!1,pngQuality:100,pngEffort:7,pngBitdepth:8,pngDither:1,jp2Quality:80,jp2TileHeight:512,jp2TileWidth:512,jp2Lossless:!1,jp2ChromaSubsampling:"4:4:4",webpQuality:80,webpAlphaQuality:100,webpLossless:!1,webpNearLossless:!1,webpSmartSubsample:!1,webpPreset:"default",webpEffort:4,webpMinSize:!1,webpMixed:!1,gifBitdepth:8,gifEffort:7,gifDither:1,gifInterFrameMaxError:0,gifInterPaletteMaxError:3,gifReuse:!0,gifProgressive:!1,tiffQuality:80,tiffCompression:"jpeg",tiffPredictor:"horizontal",tiffPyramid:!1,tiffBitdepth:8,tiffTile:!1,tiffTileHeight:256,tiffTileWidth:256,tiffXres:1,tiffYres:1,tiffResolutionUnit:"inch",heifQuality:50,heifLossless:!1,heifCompression:"av1",heifEffort:4,heifChromaSubsampling:"4:4:4",jxlDistance:1,jxlDecodingTier:0,jxlEffort:7,jxlLossless:!1,rawDepth:"uchar",tileSize:256,tileOverlap:0,tileContainer:"fs",tileLayout:"dz",tileFormat:"last",tileDepth:"last",tileAngle:0,tileSkipBlanks:-1,tileBackground:[255,255,255,255],tileCentre:!1,tileId:"https://example.com/iiif",tileBasename:"",timeoutSeconds:0,linearA:[],linearB:[],debuglog:t=>{this.emit("warning",t),os(t)},queueListener:function(t){me.queue.emit("change",t)}},this.options.input=this._createInputDescriptor(e,r,{allowStream:!0}),this):new me(e,r)};Object.setPrototypeOf(me.prototype,tt.Duplex.prototype);Object.setPrototypeOf(me,tt.Duplex);function ss(){const e=this.constructor.call();return e.options=Object.assign({},this.options),this._isStreamInput()&&this.on("finish",()=>{this._flattenBufferIn(),e.options.bufferIn=this.options.bufferIn,e.emit("finish")}),e}Object.assign(me.prototype,{clone:ss});var ls=me,kn={exports:{}},fs={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Rn={exports:{}},cs=function(r){return!r||typeof r=="string"?!1:r instanceof Array||Array.isArray(r)||r.length>=0&&(r.splice instanceof Function||Object.getOwnPropertyDescriptor(r,r.length-1)&&r.constructor.name!=="String")},us=cs,hs=Array.prototype.concat,ds=Array.prototype.slice,St=Rn.exports=function(r){for(var t=[],n=0,i=r.length;n<i;n++){var o=r[n];us(o)?t=hs.call(t,ds.call(o)):t.push(o)}return t};St.wrap=function(e){return function(){return e(St(arguments))}};var gs=Rn.exports,Ne=fs,ze=gs,xn=Object.hasOwnProperty,On=Object.create(null);for(var jr in Ne)xn.call(Ne,jr)&&(On[Ne[jr]]=jr);var C=kn.exports={to:{},get:{}};C.get=function(e){var r=e.substring(0,3).toLowerCase(),t,n;switch(r){case"hsl":t=C.get.hsl(e),n="hsl";break;case"hwb":t=C.get.hwb(e),n="hwb";break;default:t=C.get.rgb(e),n="rgb";break}return t?{model:n,value:t}:null};C.get.rgb=function(e){if(!e)return null;var r=/^#([a-f0-9]{3,4})$/i,t=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=/^(\w+)$/,l=[0,0,0,1],u,s,d;if(u=e.match(t)){for(d=u[2],u=u[1],s=0;s<3;s++){var E=s*2;l[s]=parseInt(u.slice(E,E+2),16)}d&&(l[3]=parseInt(d,16)/255)}else if(u=e.match(r)){for(u=u[1],d=u[3],s=0;s<3;s++)l[s]=parseInt(u[s]+u[s],16);d&&(l[3]=parseInt(d+d,16)/255)}else if(u=e.match(n)){for(s=0;s<3;s++)l[s]=parseInt(u[s+1],0);u[4]&&(u[5]?l[3]=parseFloat(u[4])*.01:l[3]=parseFloat(u[4]))}else if(u=e.match(i)){for(s=0;s<3;s++)l[s]=Math.round(parseFloat(u[s+1])*2.55);u[4]&&(u[5]?l[3]=parseFloat(u[4])*.01:l[3]=parseFloat(u[4]))}else return(u=e.match(o))?u[1]==="transparent"?[0,0,0,0]:xn.call(Ne,u[1])?(l=Ne[u[1]],l[3]=1,l):null:null;for(s=0;s<3;s++)l[s]=fe(l[s],0,255);return l[3]=fe(l[3],0,1),l};C.get.hsl=function(e){if(!e)return null;var r=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=e.match(r);if(t){var n=parseFloat(t[4]),i=(parseFloat(t[1])%360+360)%360,o=fe(parseFloat(t[2]),0,100),l=fe(parseFloat(t[3]),0,100),u=fe(isNaN(n)?1:n,0,1);return[i,o,l,u]}return null};C.get.hwb=function(e){if(!e)return null;var r=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=e.match(r);if(t){var n=parseFloat(t[4]),i=(parseFloat(t[1])%360+360)%360,o=fe(parseFloat(t[2]),0,100),l=fe(parseFloat(t[3]),0,100),u=fe(isNaN(n)?1:n,0,1);return[i,o,l,u]}return null};C.to.hex=function(){var e=ze(arguments);return"#"+Ye(e[0])+Ye(e[1])+Ye(e[2])+(e[3]<1?Ye(Math.round(e[3]*255)):"")};C.to.rgb=function(){var e=ze(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};C.to.rgb.percent=function(){var e=ze(arguments),r=Math.round(e[0]/255*100),t=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+r+"%, "+t+"%, "+n+"%)":"rgba("+r+"%, "+t+"%, "+n+"%, "+e[3]+")"};C.to.hsl=function(){var e=ze(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};C.to.hwb=function(){var e=ze(arguments),r="";return e.length>=4&&e[3]!==1&&(r=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+r+")"};C.to.keyword=function(e){return On[e.slice(0,3)]};function fe(e,r,t){return Math.min(Math.max(r,e),t)}function Ye(e){var r=Math.round(e).toString(16).toUpperCase();return r.length<2?"0"+r:r}var ms=kn.exports,ys={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const _e=ys,$n={};for(const e of Object.keys(_e))$n[_e[e]]=e;const p={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var Fn=p;for(const e of Object.keys(p)){if(!("channels"in p[e]))throw new Error("missing channels property: "+e);if(!("labels"in p[e]))throw new Error("missing channel labels property: "+e);if(p[e].labels.length!==p[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:r,labels:t}=p[e];delete p[e].channels,delete p[e].labels,Object.defineProperty(p[e],"channels",{value:r}),Object.defineProperty(p[e],"labels",{value:t})}p.rgb.hsl=function(e){const r=e[0]/255,t=e[1]/255,n=e[2]/255,i=Math.min(r,t,n),o=Math.max(r,t,n),l=o-i;let u,s;o===i?u=0:r===o?u=(t-n)/l:t===o?u=2+(n-r)/l:n===o&&(u=4+(r-t)/l),u=Math.min(u*60,360),u<0&&(u+=360);const d=(i+o)/2;return o===i?s=0:d<=.5?s=l/(o+i):s=l/(2-o-i),[u,s*100,d*100]};p.rgb.hsv=function(e){let r,t,n,i,o;const l=e[0]/255,u=e[1]/255,s=e[2]/255,d=Math.max(l,u,s),E=d-Math.min(l,u,s),I=function(O){return(d-O)/6/E+1/2};return E===0?(i=0,o=0):(o=E/d,r=I(l),t=I(u),n=I(s),l===d?i=n-t:u===d?i=1/3+r-n:s===d&&(i=2/3+t-r),i<0?i+=1:i>1&&(i-=1)),[i*360,o*100,d*100]};p.rgb.hwb=function(e){const r=e[0],t=e[1];let n=e[2];const i=p.rgb.hsl(e)[0],o=1/255*Math.min(r,Math.min(t,n));return n=1-1/255*Math.max(r,Math.max(t,n)),[i,o*100,n*100]};p.rgb.cmyk=function(e){const r=e[0]/255,t=e[1]/255,n=e[2]/255,i=Math.min(1-r,1-t,1-n),o=(1-r-i)/(1-i)||0,l=(1-t-i)/(1-i)||0,u=(1-n-i)/(1-i)||0;return[o*100,l*100,u*100,i*100]};function ps(e,r){return(e[0]-r[0])**2+(e[1]-r[1])**2+(e[2]-r[2])**2}p.rgb.keyword=function(e){const r=$n[e];if(r)return r;let t=1/0,n;for(const i of Object.keys(_e)){const o=_e[i],l=ps(e,o);l<t&&(t=l,n=i)}return n};p.keyword.rgb=function(e){return _e[e]};p.rgb.xyz=function(e){let r=e[0]/255,t=e[1]/255,n=e[2]/255;r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;const i=r*.4124+t*.3576+n*.1805,o=r*.2126+t*.7152+n*.0722,l=r*.0193+t*.1192+n*.9505;return[i*100,o*100,l*100]};p.rgb.lab=function(e){const r=p.rgb.xyz(e);let t=r[0],n=r[1],i=r[2];t/=95.047,n/=100,i/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const o=116*n-16,l=500*(t-n),u=200*(n-i);return[o,l,u]};p.hsl.rgb=function(e){const r=e[0]/360,t=e[1]/100,n=e[2]/100;let i,o,l;if(t===0)return l=n*255,[l,l,l];n<.5?i=n*(1+t):i=n+t-n*t;const u=2*n-i,s=[0,0,0];for(let d=0;d<3;d++)o=r+1/3*-(d-1),o<0&&o++,o>1&&o--,6*o<1?l=u+(i-u)*6*o:2*o<1?l=i:3*o<2?l=u+(i-u)*(2/3-o)*6:l=u,s[d]=l*255;return s};p.hsl.hsv=function(e){const r=e[0];let t=e[1]/100,n=e[2]/100,i=t;const o=Math.max(n,.01);n*=2,t*=n<=1?n:2-n,i*=o<=1?o:2-o;const l=(n+t)/2,u=n===0?2*i/(o+i):2*t/(n+t);return[r,u*100,l*100]};p.hsv.rgb=function(e){const r=e[0]/60,t=e[1]/100;let n=e[2]/100;const i=Math.floor(r)%6,o=r-Math.floor(r),l=255*n*(1-t),u=255*n*(1-t*o),s=255*n*(1-t*(1-o));switch(n*=255,i){case 0:return[n,s,l];case 1:return[u,n,l];case 2:return[l,n,s];case 3:return[l,u,n];case 4:return[s,l,n];case 5:return[n,l,u]}};p.hsv.hsl=function(e){const r=e[0],t=e[1]/100,n=e[2]/100,i=Math.max(n,.01);let o,l;l=(2-t)*n;const u=(2-t)*i;return o=t*i,o/=u<=1?u:2-u,o=o||0,l/=2,[r,o*100,l*100]};p.hwb.rgb=function(e){const r=e[0]/360;let t=e[1]/100,n=e[2]/100;const i=t+n;let o;i>1&&(t/=i,n/=i);const l=Math.floor(6*r),u=1-n;o=6*r-l,l&1&&(o=1-o);const s=t+o*(u-t);let d,E,I;switch(l){default:case 6:case 0:d=u,E=s,I=t;break;case 1:d=s,E=u,I=t;break;case 2:d=t,E=u,I=s;break;case 3:d=t,E=s,I=u;break;case 4:d=s,E=t,I=u;break;case 5:d=u,E=t,I=s;break}return[d*255,E*255,I*255]};p.cmyk.rgb=function(e){const r=e[0]/100,t=e[1]/100,n=e[2]/100,i=e[3]/100,o=1-Math.min(1,r*(1-i)+i),l=1-Math.min(1,t*(1-i)+i),u=1-Math.min(1,n*(1-i)+i);return[o*255,l*255,u*255]};p.xyz.rgb=function(e){const r=e[0]/100,t=e[1]/100,n=e[2]/100;let i,o,l;return i=r*3.2406+t*-1.5372+n*-.4986,o=r*-.9689+t*1.8758+n*.0415,l=r*.0557+t*-.204+n*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,l=l>.0031308?1.055*l**(1/2.4)-.055:l*12.92,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),l=Math.min(Math.max(0,l),1),[i*255,o*255,l*255]};p.xyz.lab=function(e){let r=e[0],t=e[1],n=e[2];r/=95.047,t/=100,n/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;const i=116*t-16,o=500*(r-t),l=200*(t-n);return[i,o,l]};p.lab.xyz=function(e){const r=e[0],t=e[1],n=e[2];let i,o,l;o=(r+16)/116,i=t/500+o,l=o-n/200;const u=o**3,s=i**3,d=l**3;return o=u>.008856?u:(o-16/116)/7.787,i=s>.008856?s:(i-16/116)/7.787,l=d>.008856?d:(l-16/116)/7.787,i*=95.047,o*=100,l*=108.883,[i,o,l]};p.lab.lch=function(e){const r=e[0],t=e[1],n=e[2];let i;i=Math.atan2(n,t)*360/2/Math.PI,i<0&&(i+=360);const l=Math.sqrt(t*t+n*n);return[r,l,i]};p.lch.lab=function(e){const r=e[0],t=e[1],i=e[2]/360*2*Math.PI,o=t*Math.cos(i),l=t*Math.sin(i);return[r,o,l]};p.rgb.ansi16=function(e,r=null){const[t,n,i]=e;let o=r===null?p.rgb.hsv(e)[2]:r;if(o=Math.round(o/50),o===0)return 30;let l=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return o===2&&(l+=60),l};p.hsv.ansi16=function(e){return p.rgb.ansi16(p.hsv.rgb(e),e[2])};p.rgb.ansi256=function(e){const r=e[0],t=e[1],n=e[2];return r===t&&t===n?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5)};p.ansi16.rgb=function(e){let r=e%10;if(r===0||r===7)return e>50&&(r+=3.5),r=r/10.5*255,[r,r,r];const t=(~~(e>50)+1)*.5,n=(r&1)*t*255,i=(r>>1&1)*t*255,o=(r>>2&1)*t*255;return[n,i,o]};p.ansi256.rgb=function(e){if(e>=232){const o=(e-232)*10+8;return[o,o,o]}e-=16;let r;const t=Math.floor(e/36)/5*255,n=Math.floor((r=e%36)/6)/5*255,i=r%6/5*255;return[t,n,i]};p.rgb.hex=function(e){const t=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(t.length)+t};p.hex.rgb=function(e){const r=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!r)return[0,0,0];let t=r[0];r[0].length===3&&(t=t.split("").map(u=>u+u).join(""));const n=parseInt(t,16),i=n>>16&255,o=n>>8&255,l=n&255;return[i,o,l]};p.rgb.hcg=function(e){const r=e[0]/255,t=e[1]/255,n=e[2]/255,i=Math.max(Math.max(r,t),n),o=Math.min(Math.min(r,t),n),l=i-o;let u,s;return l<1?u=o/(1-l):u=0,l<=0?s=0:i===r?s=(t-n)/l%6:i===t?s=2+(n-r)/l:s=4+(r-t)/l,s/=6,s%=1,[s*360,l*100,u*100]};p.hsl.hcg=function(e){const r=e[1]/100,t=e[2]/100,n=t<.5?2*r*t:2*r*(1-t);let i=0;return n<1&&(i=(t-.5*n)/(1-n)),[e[0],n*100,i*100]};p.hsv.hcg=function(e){const r=e[1]/100,t=e[2]/100,n=r*t;let i=0;return n<1&&(i=(t-n)/(1-n)),[e[0],n*100,i*100]};p.hcg.rgb=function(e){const r=e[0]/360,t=e[1]/100,n=e[2]/100;if(t===0)return[n*255,n*255,n*255];const i=[0,0,0],o=r%1*6,l=o%1,u=1-l;let s=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=l,i[2]=0;break;case 1:i[0]=u,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=l;break;case 3:i[0]=0,i[1]=u,i[2]=1;break;case 4:i[0]=l,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=u}return s=(1-t)*n,[(t*i[0]+s)*255,(t*i[1]+s)*255,(t*i[2]+s)*255]};p.hcg.hsv=function(e){const r=e[1]/100,t=e[2]/100,n=r+t*(1-r);let i=0;return n>0&&(i=r/n),[e[0],i*100,n*100]};p.hcg.hsl=function(e){const r=e[1]/100,n=e[2]/100*(1-r)+.5*r;let i=0;return n>0&&n<.5?i=r/(2*n):n>=.5&&n<1&&(i=r/(2*(1-n))),[e[0],i*100,n*100]};p.hcg.hwb=function(e){const r=e[1]/100,t=e[2]/100,n=r+t*(1-r);return[e[0],(n-r)*100,(1-n)*100]};p.hwb.hcg=function(e){const r=e[1]/100,n=1-e[2]/100,i=n-r;let o=0;return i<1&&(o=(n-i)/(1-i)),[e[0],i*100,o*100]};p.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};p.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};p.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};p.gray.hsl=function(e){return[0,0,e[0]]};p.gray.hsv=p.gray.hsl;p.gray.hwb=function(e){return[0,100,e[0]]};p.gray.cmyk=function(e){return[0,0,0,e[0]]};p.gray.lab=function(e){return[e[0],0,0]};p.gray.hex=function(e){const r=Math.round(e[0]/100*255)&255,n=((r<<16)+(r<<8)+r).toString(16).toUpperCase();return"000000".substring(n.length)+n};p.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};const lr=Fn;function bs(){const e={},r=Object.keys(lr);for(let t=r.length,n=0;n<t;n++)e[r[n]]={distance:-1,parent:null};return e}function vs(e){const r=bs(),t=[e];for(r[e].distance=0;t.length;){const n=t.pop(),i=Object.keys(lr[n]);for(let o=i.length,l=0;l<o;l++){const u=i[l],s=r[u];s.distance===-1&&(s.distance=r[n].distance+1,s.parent=n,t.unshift(u))}}return r}function ws(e,r){return function(t){return r(e(t))}}function Es(e,r){const t=[r[e].parent,e];let n=lr[r[e].parent][e],i=r[e].parent;for(;r[i].parent;)t.unshift(r[i].parent),n=ws(lr[r[i].parent][i],n),i=r[i].parent;return n.conversion=t,n}var As=function(e){const r=vs(e),t={},n=Object.keys(r);for(let i=n.length,o=0;o<i;o++){const l=n[o];r[l].parent!==null&&(t[l]=Es(l,r))}return t};const _r=Fn,Ps=As,Re={},Ss=Object.keys(_r);function Is(e){const r=function(...t){const n=t[0];return n==null?n:(n.length>1&&(t=n),e(t))};return"conversion"in e&&(r.conversion=e.conversion),r}function js(e){const r=function(...t){const n=t[0];if(n==null)return n;n.length>1&&(t=n);const i=e(t);if(typeof i=="object")for(let o=i.length,l=0;l<o;l++)i[l]=Math.round(i[l]);return i};return"conversion"in e&&(r.conversion=e.conversion),r}Ss.forEach(e=>{Re[e]={},Object.defineProperty(Re[e],"channels",{value:_r[e].channels}),Object.defineProperty(Re[e],"labels",{value:_r[e].labels});const r=Ps(e);Object.keys(r).forEach(n=>{const i=r[n];Re[e][n]=js(i),Re[e][n].raw=Is(i)})});var ks=Re;const xe=ms,_=ks,Tn=["keyword","gray","hex"],Cr={};for(const e of Object.keys(_))Cr[[..._[e].labels].sort().join("")]=e;const fr={};function B(e,r){if(!(this instanceof B))return new B(e,r);if(r&&r in Tn&&(r=null),r&&!(r in _))throw new Error("Unknown model: "+r);let t,n;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof B)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if(typeof e=="string"){const i=xe.get(e);if(i===null)throw new Error("Unable to parse color from string: "+e);this.model=i.model,n=_[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(e.length>0){this.model=r||"rgb",n=_[this.model].channels;const i=Array.prototype.slice.call(e,0,n);this.color=Dr(i,n),this.valpha=typeof e[n]=="number"?e[n]:1}else if(typeof e=="number")this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;const i=Object.keys(e);"alpha"in e&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);const o=i.sort().join("");if(!(o in Cr))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=Cr[o];const{labels:l}=_[this.model],u=[];for(t=0;t<l.length;t++)u.push(e[l[t]]);this.color=Dr(u)}if(fr[this.model])for(n=_[this.model].channels,t=0;t<n;t++){const i=fr[this.model][t];i&&(this.color[t]=i(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}B.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let r=this.model in xe.to?this:this.rgb();r=r.round(typeof e=="number"?e:1);const t=r.valpha===1?r.color:[...r.color,this.valpha];return xe.to[r.model](t)},percentString(e){const r=this.rgb().round(typeof e=="number"?e:1),t=r.valpha===1?r.color:[...r.color,this.valpha];return xe.to.rgb.percent(t)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const e={},{channels:r}=_[this.model],{labels:t}=_[this.model];for(let n=0;n<r;n++)e[t[n]]=this.color[n];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new B([...this.color.map(xs(e)),this.valpha],this.model)},alpha(e){return e!==void 0?new B([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:$("rgb",0,F(255)),green:$("rgb",1,F(255)),blue:$("rgb",2,F(255)),hue:$(["hsl","hsv","hsl","hwb","hcg"],0,e=>(e%360+360)%360),saturationl:$("hsl",1,F(100)),lightness:$("hsl",2,F(100)),saturationv:$("hsv",1,F(100)),value:$("hsv",2,F(100)),chroma:$("hcg",1,F(100)),gray:$("hcg",2,F(100)),white:$("hwb",1,F(100)),wblack:$("hwb",2,F(100)),cyan:$("cmyk",0,F(100)),magenta:$("cmyk",1,F(100)),yellow:$("cmyk",2,F(100)),black:$("cmyk",3,F(100)),x:$("xyz",0,F(95.047)),y:$("xyz",1,F(100)),z:$("xyz",2,F(108.833)),l:$("lab",0,F(100)),a:$("lab",1),b:$("lab",2),keyword(e){return e!==void 0?new B(e):_[this.model].keyword(this.color)},hex(e){return e!==void 0?new B(e):xe.to.hex(this.rgb().round().color)},hexa(e){if(e!==void 0)return new B(e);const r=this.rgb().round().color;let t=Math.round(this.valpha*255).toString(16).toUpperCase();return t.length===1&&(t="0"+t),xe.to.hex(r)+t},rgbNumber(){const e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity(){const e=this.rgb().color,r=[];for(const[t,n]of e.entries()){const i=n/255;r[t]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*r[0]+.7152*r[1]+.0722*r[2]},contrast(e){const r=this.luminosity(),t=e.luminosity();return r>t?(r+.05)/(t+.05):(t+.05)/(r+.05)},level(e){const r=this.contrast(e);return r>=7?"AAA":r>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(e[0]*2126+e[1]*7152+e[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let r=0;r<3;r++)e.color[r]=255-e.color[r];return e},lighten(e){const r=this.hsl();return r.color[2]+=r.color[2]*e,r},darken(e){const r=this.hsl();return r.color[2]-=r.color[2]*e,r},saturate(e){const r=this.hsl();return r.color[1]+=r.color[1]*e,r},desaturate(e){const r=this.hsl();return r.color[1]-=r.color[1]*e,r},whiten(e){const r=this.hwb();return r.color[1]+=r.color[1]*e,r},blacken(e){const r=this.hwb();return r.color[2]+=r.color[2]*e,r},grayscale(){const e=this.rgb().color,r=e[0]*.3+e[1]*.59+e[2]*.11;return B.rgb(r,r,r)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const r=this.hsl();let t=r.color[0];return t=(t+e)%360,t=t<0?360+t:t,r.color[0]=t,r},mix(e,r){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const t=e.rgb(),n=this.rgb(),i=r===void 0?.5:r,o=2*i-1,l=t.alpha()-n.alpha(),u=((o*l===-1?o:(o+l)/(1+o*l))+1)/2,s=1-u;return B.rgb(u*t.red()+s*n.red(),u*t.green()+s*n.green(),u*t.blue()+s*n.blue(),t.alpha()*i+n.alpha()*(1-i))}};for(const e of Object.keys(_)){if(Tn.includes(e))continue;const{channels:r}=_[e];B.prototype[e]=function(...t){return this.model===e?new B(this):t.length>0?new B(t,e):new B([...Os(_[this.model][e].raw(this.color)),this.valpha],e)},B[e]=function(...t){let n=t[0];return typeof n=="number"&&(n=Dr(t,r)),new B(n,e)}}function Rs(e,r){return Number(e.toFixed(r))}function xs(e){return function(r){return Rs(r,e)}}function $(e,r,t){e=Array.isArray(e)?e:[e];for(const n of e)(fr[n]||(fr[n]=[]))[r]=t;return e=e[0],function(n){let i;return n!==void 0?(t&&(n=t(n)),i=this[e](),i.color[r]=n,i):(i=this[e]().color[r],t&&(i=t(i)),i)}}function F(e){return function(r){return Math.max(0,Math.min(e,r))}}function Os(e){return Array.isArray(e)?e:[e]}function Dr(e,r){for(let t=0;t<r;t++)typeof e[t]!="number"&&(e[t]=0);return e}var nt=B;const $s=nt,h=re,se=rt,Fs={left:"low",center:"centre",centre:"centre",right:"high"};function Bn(e){const{raw:r,density:t,limitInputPixels:n,ignoreIcc:i,unlimited:o,sequentialRead:l,failOn:u,failOnError:s,animated:d,page:E,pages:I,subifd:O}=e;return[r,t,n,i,o,l,u,s,d,E,I,O].some(h.defined)?{raw:r,density:t,limitInputPixels:n,ignoreIcc:i,unlimited:o,sequentialRead:l,failOn:u,failOnError:s,animated:d,page:E,pages:I,subifd:O}:void 0}function Ts(e,r,t){const n={failOn:"warning",limitInputPixels:Math.pow(16383,2),ignoreIcc:!1,unlimited:!1,sequentialRead:!0};if(h.string(e))n.file=e;else if(h.buffer(e)){if(e.length===0)throw Error("Input Buffer is empty");n.buffer=e}else if(h.arrayBuffer(e)){if(e.byteLength===0)throw Error("Input bit Array is empty");n.buffer=Buffer.from(e,0,e.byteLength)}else if(h.typedArray(e)){if(e.length===0)throw Error("Input Bit Array is empty");n.buffer=Buffer.from(e.buffer,e.byteOffset,e.byteLength)}else if(h.plainObject(e)&&!h.defined(r))r=e,Bn(r)&&(n.buffer=[]);else if(!h.defined(e)&&!h.defined(r)&&h.object(t)&&t.allowStream)n.buffer=[];else throw new Error(`Unsupported input '${e}' of type ${typeof e}${h.defined(r)?` when also providing options of type ${typeof r}`:""}`);if(h.object(r)){if(h.defined(r.failOnError))if(h.bool(r.failOnError))n.failOn=r.failOnError?"warning":"none";else throw h.invalidParameterError("failOnError","boolean",r.failOnError);if(h.defined(r.failOn))if(h.string(r.failOn)&&h.inArray(r.failOn,["none","truncated","error","warning"]))n.failOn=r.failOn;else throw h.invalidParameterError("failOn","one of: none, truncated, error, warning",r.failOn);if(h.defined(r.density))if(h.inRange(r.density,1,1e5))n.density=r.density;else throw h.invalidParameterError("density","number between 1 and 100000",r.density);if(h.defined(r.ignoreIcc))if(h.bool(r.ignoreIcc))n.ignoreIcc=r.ignoreIcc;else throw h.invalidParameterError("ignoreIcc","boolean",r.ignoreIcc);if(h.defined(r.limitInputPixels))if(h.bool(r.limitInputPixels))n.limitInputPixels=r.limitInputPixels?Math.pow(16383,2):0;else if(h.integer(r.limitInputPixels)&&h.inRange(r.limitInputPixels,0,Number.MAX_SAFE_INTEGER))n.limitInputPixels=r.limitInputPixels;else throw h.invalidParameterError("limitInputPixels","positive integer",r.limitInputPixels);if(h.defined(r.unlimited))if(h.bool(r.unlimited))n.unlimited=r.unlimited;else throw h.invalidParameterError("unlimited","boolean",r.unlimited);if(h.defined(r.sequentialRead))if(h.bool(r.sequentialRead))n.sequentialRead=r.sequentialRead;else throw h.invalidParameterError("sequentialRead","boolean",r.sequentialRead);if(h.defined(r.raw))if(h.object(r.raw)&&h.integer(r.raw.width)&&r.raw.width>0&&h.integer(r.raw.height)&&r.raw.height>0&&h.integer(r.raw.channels)&&h.inRange(r.raw.channels,1,4))switch(n.rawWidth=r.raw.width,n.rawHeight=r.raw.height,n.rawChannels=r.raw.channels,n.rawPremultiplied=!!r.raw.premultiplied,e.constructor){case Uint8Array:case Uint8ClampedArray:n.rawDepth="uchar";break;case Int8Array:n.rawDepth="char";break;case Uint16Array:n.rawDepth="ushort";break;case Int16Array:n.rawDepth="short";break;case Uint32Array:n.rawDepth="uint";break;case Int32Array:n.rawDepth="int";break;case Float32Array:n.rawDepth="float";break;case Float64Array:n.rawDepth="double";break;default:n.rawDepth="uchar";break}else throw new Error("Expected width, height and channels for raw pixel input");if(h.defined(r.animated))if(h.bool(r.animated))n.pages=r.animated?-1:1;else throw h.invalidParameterError("animated","boolean",r.animated);if(h.defined(r.pages))if(h.integer(r.pages)&&h.inRange(r.pages,-1,1e5))n.pages=r.pages;else throw h.invalidParameterError("pages","integer between -1 and 100000",r.pages);if(h.defined(r.page))if(h.integer(r.page)&&h.inRange(r.page,0,1e5))n.page=r.page;else throw h.invalidParameterError("page","integer between 0 and 100000",r.page);if(h.defined(r.level))if(h.integer(r.level)&&h.inRange(r.level,0,256))n.level=r.level;else throw h.invalidParameterError("level","integer between 0 and 256",r.level);if(h.defined(r.subifd))if(h.integer(r.subifd)&&h.inRange(r.subifd,-1,1e5))n.subifd=r.subifd;else throw h.invalidParameterError("subifd","integer between -1 and 100000",r.subifd);if(h.defined(r.create))if(h.object(r.create)&&h.integer(r.create.width)&&r.create.width>0&&h.integer(r.create.height)&&r.create.height>0&&h.integer(r.create.channels)){if(n.createWidth=r.create.width,n.createHeight=r.create.height,n.createChannels=r.create.channels,h.defined(r.create.noise)){if(!h.object(r.create.noise))throw new Error("Expected noise to be an object");if(!h.inArray(r.create.noise.type,["gaussian"]))throw new Error("Only gaussian noise is supported at the moment");if(!h.inRange(r.create.channels,1,4))throw h.invalidParameterError("create.channels","number between 1 and 4",r.create.channels);if(n.createNoiseType=r.create.noise.type,h.number(r.create.noise.mean)&&h.inRange(r.create.noise.mean,0,1e4))n.createNoiseMean=r.create.noise.mean;else throw h.invalidParameterError("create.noise.mean","number between 0 and 10000",r.create.noise.mean);if(h.number(r.create.noise.sigma)&&h.inRange(r.create.noise.sigma,0,1e4))n.createNoiseSigma=r.create.noise.sigma;else throw h.invalidParameterError("create.noise.sigma","number between 0 and 10000",r.create.noise.sigma)}else if(h.defined(r.create.background)){if(!h.inRange(r.create.channels,3,4))throw h.invalidParameterError("create.channels","number between 3 and 4",r.create.channels);const i=$s(r.create.background);n.createBackground=[i.red(),i.green(),i.blue(),Math.round(i.alpha()*255)]}else throw new Error("Expected valid noise or background to create a new input image");delete n.buffer}else throw new Error("Expected valid width, height and channels to create a new input image");if(h.defined(r.text))if(h.object(r.text)&&h.string(r.text.text)){if(n.textValue=r.text.text,h.defined(r.text.height)&&h.defined(r.text.dpi))throw new Error("Expected only one of dpi or height");if(h.defined(r.text.font))if(h.string(r.text.font))n.textFont=r.text.font;else throw h.invalidParameterError("text.font","string",r.text.font);if(h.defined(r.text.fontfile))if(h.string(r.text.fontfile))n.textFontfile=r.text.fontfile;else throw h.invalidParameterError("text.fontfile","string",r.text.fontfile);if(h.defined(r.text.width))if(h.number(r.text.width))n.textWidth=r.text.width;else throw h.invalidParameterError("text.textWidth","number",r.text.width);if(h.defined(r.text.height))if(h.number(r.text.height))n.textHeight=r.text.height;else throw h.invalidParameterError("text.height","number",r.text.height);if(h.defined(r.text.align))if(h.string(r.text.align)&&h.string(this.constructor.align[r.text.align]))n.textAlign=this.constructor.align[r.text.align];else throw h.invalidParameterError("text.align","valid alignment",r.text.align);if(h.defined(r.text.justify))if(h.bool(r.text.justify))n.textJustify=r.text.justify;else throw h.invalidParameterError("text.justify","boolean",r.text.justify);if(h.defined(r.text.dpi))if(h.number(r.text.dpi)&&h.inRange(r.text.dpi,1,1e5))n.textDpi=r.text.dpi;else throw h.invalidParameterError("text.dpi","number between 1 and 100000",r.text.dpi);if(h.defined(r.text.rgba))if(h.bool(r.text.rgba))n.textRgba=r.text.rgba;else throw h.invalidParameterError("text.rgba","bool",r.text.rgba);if(h.defined(r.text.spacing))if(h.number(r.text.spacing))n.textSpacing=r.text.spacing;else throw h.invalidParameterError("text.spacing","number",r.text.spacing);if(h.defined(r.text.wrap))if(h.string(r.text.wrap)&&h.inArray(r.text.wrap,["word","char","wordChar","none"]))n.textWrap=r.text.wrap;else throw h.invalidParameterError("text.wrap","one of: word, char, wordChar, none",r.text.wrap);delete n.buffer}else throw new Error("Expected a valid string to create an image with text.")}else if(h.defined(r))throw new Error("Invalid input options "+r);return n}function Bs(e,r,t){Array.isArray(this.options.input.buffer)?h.buffer(e)?(this.options.input.buffer.length===0&&this.on("finish",()=>{this.streamInFinished=!0}),this.options.input.buffer.push(e),t()):t(new Error("Non-Buffer data on Writable Stream")):t(new Error("Unexpected data on Writable Stream"))}function Ms(){this._isStreamInput()&&(this.options.input.buffer=Buffer.concat(this.options.input.buffer))}function Ls(){return Array.isArray(this.options.input.buffer)}function Ns(e){return h.fn(e)?(this._isStreamInput()?this.on("finish",()=>{this._flattenBufferIn(),se.metadata(this.options,e)}):se.metadata(this.options,e),this):this._isStreamInput()?new Promise((r,t)=>{const n=()=>{this._flattenBufferIn(),se.metadata(this.options,(i,o)=>{i?t(i):r(o)})};this.writableFinished?n():this.once("finish",n)}):new Promise((r,t)=>{se.metadata(this.options,(n,i)=>{n?t(n):r(i)})})}function _s(e){return h.fn(e)?(this._isStreamInput()?this.on("finish",()=>{this._flattenBufferIn(),se.stats(this.options,e)}):se.stats(this.options,e),this):this._isStreamInput()?new Promise((r,t)=>{this.on("finish",function(){this._flattenBufferIn(),se.stats(this.options,(n,i)=>{n?t(n):r(i)})})}):new Promise((r,t)=>{se.stats(this.options,(n,i)=>{n?t(n):r(i)})})}var Cs=function(e){Object.assign(e.prototype,{_inputOptionsFromObject:Bn,_createInputDescriptor:Ts,_write:Bs,_flattenBufferIn:Ms,_isStreamInput:Ls,metadata:Ns,stats:_s}),e.align=Fs};const b=re,Mn={center:0,centre:0,north:1,east:2,south:3,west:4,northeast:5,southeast:6,southwest:7,northwest:8},Ln={top:1,right:2,bottom:3,left:4,"right top":5,"right bottom":6,"left bottom":7,"left top":8},It={background:"background",copy:"copy",repeat:"repeat",mirror:"mirror"},Nn={entropy:16,attention:17},zr={nearest:"nearest",cubic:"cubic",mitchell:"mitchell",lanczos2:"lanczos2",lanczos3:"lanczos3"},Ds={contain:"contain",cover:"cover",fill:"fill",inside:"inside",outside:"outside"},zs={contain:"embed",cover:"crop",fill:"ignore_aspect",inside:"max",outside:"min"};function it(e){return e.angle%360!==0||e.useExifOrientation===!0||e.rotationAngle!==0}function cr(e){return e.width!==-1||e.height!==-1}function Us(e,r,t){if(cr(this.options)&&this.options.debuglog("ignoring previous resize options"),b.defined(e))if(b.object(e)&&!b.defined(t))t=e;else if(b.integer(e)&&e>0)this.options.width=e;else throw b.invalidParameterError("width","positive integer",e);else this.options.width=-1;if(b.defined(r))if(b.integer(r)&&r>0)this.options.height=r;else throw b.invalidParameterError("height","positive integer",r);else this.options.height=-1;if(b.object(t)){if(b.defined(t.width))if(b.integer(t.width)&&t.width>0)this.options.width=t.width;else throw b.invalidParameterError("width","positive integer",t.width);if(b.defined(t.height))if(b.integer(t.height)&&t.height>0)this.options.height=t.height;else throw b.invalidParameterError("height","positive integer",t.height);if(b.defined(t.fit)){const n=zs[t.fit];if(b.string(n))this.options.canvas=n;else throw b.invalidParameterError("fit","valid fit",t.fit)}if(b.defined(t.position)){const n=b.integer(t.position)?t.position:Nn[t.position]||Ln[t.position]||Mn[t.position];if(b.integer(n)&&(b.inRange(n,0,8)||b.inRange(n,16,17)))this.options.position=n;else throw b.invalidParameterError("position","valid position/gravity/strategy",t.position)}if(this._setBackgroundColourOption("resizeBackground",t.background),b.defined(t.kernel))if(b.string(zr[t.kernel]))this.options.kernel=zr[t.kernel];else throw b.invalidParameterError("kernel","valid kernel name",t.kernel);b.defined(t.withoutEnlargement)&&this._setBooleanOption("withoutEnlargement",t.withoutEnlargement),b.defined(t.withoutReduction)&&this._setBooleanOption("withoutReduction",t.withoutReduction),b.defined(t.fastShrinkOnLoad)&&this._setBooleanOption("fastShrinkOnLoad",t.fastShrinkOnLoad)}return it(this.options)&&cr(this.options)&&(this.options.rotateBeforePreExtract=!0),this}function Gs(e){if(b.integer(e)&&e>0)this.options.extendTop=e,this.options.extendBottom=e,this.options.extendLeft=e,this.options.extendRight=e;else if(b.object(e)){if(b.defined(e.top))if(b.integer(e.top)&&e.top>=0)this.options.extendTop=e.top;else throw b.invalidParameterError("top","positive integer",e.top);if(b.defined(e.bottom))if(b.integer(e.bottom)&&e.bottom>=0)this.options.extendBottom=e.bottom;else throw b.invalidParameterError("bottom","positive integer",e.bottom);if(b.defined(e.left))if(b.integer(e.left)&&e.left>=0)this.options.extendLeft=e.left;else throw b.invalidParameterError("left","positive integer",e.left);if(b.defined(e.right))if(b.integer(e.right)&&e.right>=0)this.options.extendRight=e.right;else throw b.invalidParameterError("right","positive integer",e.right);if(this._setBackgroundColourOption("extendBackground",e.background),b.defined(e.extendWith))if(b.string(It[e.extendWith]))this.options.extendWith=It[e.extendWith];else throw b.invalidParameterError("extendWith","one of: background, copy, repeat, mirror",e.extendWith)}else throw b.invalidParameterError("extend","integer or object",e);return this}function qs(e){const r=cr(this.options)||this.options.widthPre!==-1?"Post":"Pre";return this.options[`width${r}`]!==-1&&this.options.debuglog("ignoring previous extract options"),["left","top","width","height"].forEach(function(t){const n=e[t];if(b.integer(n)&&n>=0)this.options[t+(t==="left"||t==="top"?"Offset":"")+r]=n;else throw b.invalidParameterError(t,"integer",n)},this),it(this.options)&&!cr(this.options)&&(this.options.widthPre===-1||this.options.widthPost===-1)&&(this.options.rotateBeforePreExtract=!0),this}function Ws(e){if(!b.defined(e))this.options.trimThreshold=10;else if(b.string(e))this._setBackgroundColourOption("trimBackground",e),this.options.trimThreshold=10;else if(b.number(e))if(e>=0)this.options.trimThreshold=e;else throw b.invalidParameterError("threshold","positive number",e);else if(b.object(e))if(this._setBackgroundColourOption("trimBackground",e.background),!b.defined(e.threshold))this.options.trimThreshold=10;else if(b.number(e.threshold)&&e.threshold>=0)this.options.trimThreshold=e.threshold;else throw b.invalidParameterError("threshold","positive number",e);else throw b.invalidParameterError("trim","string, number or object",e);return it(this.options)&&(this.options.rotateBeforePreExtract=!0),this}var Vs=function(e){Object.assign(e.prototype,{resize:Us,extend:Gs,extract:qs,trim:Ws}),e.gravity=Mn,e.strategy=Nn,e.kernel=zr,e.fit=Ds,e.position=Ln};const R=re,Ur={clear:"clear",source:"source",over:"over",in:"in",out:"out",atop:"atop",dest:"dest","dest-over":"dest-over","dest-in":"dest-in","dest-out":"dest-out","dest-atop":"dest-atop",xor:"xor",add:"add",saturate:"saturate",multiply:"multiply",screen:"screen",overlay:"overlay",darken:"darken",lighten:"lighten","colour-dodge":"colour-dodge","color-dodge":"colour-dodge","colour-burn":"colour-burn","color-burn":"colour-burn","hard-light":"hard-light","soft-light":"soft-light",difference:"difference",exclusion:"exclusion"};function Hs(e){if(!Array.isArray(e))throw R.invalidParameterError("images to composite","array",e);return this.options.composite=e.map(r=>{if(!R.object(r))throw R.invalidParameterError("image to composite","object",r);const t=this._inputOptionsFromObject(r),n={input:this._createInputDescriptor(r.input,t,{allowStream:!1}),blend:"over",tile:!1,left:0,top:0,hasOffset:!1,gravity:0,premultiplied:!1};if(R.defined(r.blend))if(R.string(Ur[r.blend]))n.blend=Ur[r.blend];else throw R.invalidParameterError("blend","valid blend name",r.blend);if(R.defined(r.tile))if(R.bool(r.tile))n.tile=r.tile;else throw R.invalidParameterError("tile","boolean",r.tile);if(R.defined(r.left))if(R.integer(r.left))n.left=r.left;else throw R.invalidParameterError("left","integer",r.left);if(R.defined(r.top))if(R.integer(r.top))n.top=r.top;else throw R.invalidParameterError("top","integer",r.top);if(R.defined(r.top)!==R.defined(r.left))throw new Error("Expected both left and top to be set");if(n.hasOffset=R.integer(r.top)&&R.integer(r.left),R.defined(r.gravity))if(R.integer(r.gravity)&&R.inRange(r.gravity,0,8))n.gravity=r.gravity;else if(R.string(r.gravity)&&R.integer(this.constructor.gravity[r.gravity]))n.gravity=this.constructor.gravity[r.gravity];else throw R.invalidParameterError("gravity","valid gravity",r.gravity);if(R.defined(r.premultiplied))if(R.bool(r.premultiplied))n.premultiplied=r.premultiplied;else throw R.invalidParameterError("premultiplied","boolean",r.premultiplied);return n}),this}var Xs=function(e){e.prototype.composite=Hs,e.blend=Ur};const Js=nt,f=re;function Qs(e,r){if((this.options.useExifOrientation||this.options.angle||this.options.rotationAngle)&&this.options.debuglog("ignoring previous rotate options"),!f.defined(e))this.options.useExifOrientation=!0;else if(f.integer(e)&&!(e%90))this.options.angle=e;else if(f.number(e)){if(this.options.rotationAngle=e,f.object(r)&&r.background){const t=Js(r.background);this.options.rotationBackground=[t.red(),t.green(),t.blue(),Math.round(t.alpha()*255)]}}else throw f.invalidParameterError("angle","numeric",e);return this}function Ks(e){return this.options.flip=f.bool(e)?e:!0,this}function Ys(e){return this.options.flop=f.bool(e)?e:!0,this}function Zs(e,r){const t=[].concat(...e);if(t.length===4&&t.every(f.number))this.options.affineMatrix=t;else throw f.invalidParameterError("matrix","1x4 or 2x2 array",e);if(f.defined(r))if(f.object(r)){if(this._setBackgroundColourOption("affineBackground",r.background),f.defined(r.idx))if(f.number(r.idx))this.options.affineIdx=r.idx;else throw f.invalidParameterError("options.idx","number",r.idx);if(f.defined(r.idy))if(f.number(r.idy))this.options.affineIdy=r.idy;else throw f.invalidParameterError("options.idy","number",r.idy);if(f.defined(r.odx))if(f.number(r.odx))this.options.affineOdx=r.odx;else throw f.invalidParameterError("options.odx","number",r.odx);if(f.defined(r.ody))if(f.number(r.ody))this.options.affineOdy=r.ody;else throw f.invalidParameterError("options.ody","number",r.ody);if(f.defined(r.interpolator))if(f.inArray(r.interpolator,Object.values(this.constructor.interpolators)))this.options.affineInterpolator=r.interpolator;else throw f.invalidParameterError("options.interpolator","valid interpolator name",r.interpolator)}else throw f.invalidParameterError("options","object",r);return this}function el(e,r,t){if(!f.defined(e))this.options.sharpenSigma=-1;else if(f.bool(e))this.options.sharpenSigma=e?-1:0;else if(f.number(e)&&f.inRange(e,.01,1e4)){if(this.options.sharpenSigma=e,f.defined(r))if(f.number(r)&&f.inRange(r,0,1e4))this.options.sharpenM1=r;else throw f.invalidParameterError("flat","number between 0 and 10000",r);if(f.defined(t))if(f.number(t)&&f.inRange(t,0,1e4))this.options.sharpenM2=t;else throw f.invalidParameterError("jagged","number between 0 and 10000",t)}else if(f.plainObject(e)){if(f.number(e.sigma)&&f.inRange(e.sigma,1e-6,10))this.options.sharpenSigma=e.sigma;else throw f.invalidParameterError("options.sigma","number between 0.000001 and 10",e.sigma);if(f.defined(e.m1))if(f.number(e.m1)&&f.inRange(e.m1,0,1e6))this.options.sharpenM1=e.m1;else throw f.invalidParameterError("options.m1","number between 0 and 1000000",e.m1);if(f.defined(e.m2))if(f.number(e.m2)&&f.inRange(e.m2,0,1e6))this.options.sharpenM2=e.m2;else throw f.invalidParameterError("options.m2","number between 0 and 1000000",e.m2);if(f.defined(e.x1))if(f.number(e.x1)&&f.inRange(e.x1,0,1e6))this.options.sharpenX1=e.x1;else throw f.invalidParameterError("options.x1","number between 0 and 1000000",e.x1);if(f.defined(e.y2))if(f.number(e.y2)&&f.inRange(e.y2,0,1e6))this.options.sharpenY2=e.y2;else throw f.invalidParameterError("options.y2","number between 0 and 1000000",e.y2);if(f.defined(e.y3))if(f.number(e.y3)&&f.inRange(e.y3,0,1e6))this.options.sharpenY3=e.y3;else throw f.invalidParameterError("options.y3","number between 0 and 1000000",e.y3)}else throw f.invalidParameterError("sigma","number between 0.01 and 10000",e);return this}function rl(e){if(!f.defined(e))this.options.medianSize=3;else if(f.integer(e)&&f.inRange(e,1,1e3))this.options.medianSize=e;else throw f.invalidParameterError("size","integer between 1 and 1000",e);return this}function tl(e){if(!f.defined(e))this.options.blurSigma=-1;else if(f.bool(e))this.options.blurSigma=e?-1:0;else if(f.number(e)&&f.inRange(e,.3,1e3))this.options.blurSigma=e;else throw f.invalidParameterError("sigma","number between 0.3 and 1000",e);return this}function nl(e){return this.options.flatten=f.bool(e)?e:!0,f.object(e)&&this._setBackgroundColourOption("flattenBackground",e.background),this}function il(){return this.options.unflatten=!0,this}function al(e,r){if(!f.defined(e))this.options.gamma=2.2;else if(f.number(e)&&f.inRange(e,1,3))this.options.gamma=e;else throw f.invalidParameterError("gamma","number between 1.0 and 3.0",e);if(!f.defined(r))this.options.gammaOut=this.options.gamma;else if(f.number(r)&&f.inRange(r,1,3))this.options.gammaOut=r;else throw f.invalidParameterError("gammaOut","number between 1.0 and 3.0",r);return this}function ol(e){if(this.options.negate=f.bool(e)?e:!0,f.plainObject(e)&&"alpha"in e)if(f.bool(e.alpha))this.options.negateAlpha=e.alpha;else throw f.invalidParameterError("alpha","should be boolean value",e.alpha);return this}function sl(e){if(f.plainObject(e)){if(f.defined(e.lower))if(f.number(e.lower)&&f.inRange(e.lower,0,99))this.options.normaliseLower=e.lower;else throw f.invalidParameterError("lower","number between 0 and 99",e.lower);if(f.defined(e.upper))if(f.number(e.upper)&&f.inRange(e.upper,1,100))this.options.normaliseUpper=e.upper;else throw f.invalidParameterError("upper","number between 1 and 100",e.upper)}if(this.options.normaliseLower>=this.options.normaliseUpper)throw f.invalidParameterError("range","lower to be less than upper",`${this.options.normaliseLower} >= ${this.options.normaliseUpper}`);return this.options.normalise=!0,this}function ll(e){return this.normalise(e)}function fl(e){if(f.plainObject(e)){if(f.integer(e.width)&&e.width>0)this.options.claheWidth=e.width;else throw f.invalidParameterError("width","integer greater than zero",e.width);if(f.integer(e.height)&&e.height>0)this.options.claheHeight=e.height;else throw f.invalidParameterError("height","integer greater than zero",e.height);if(f.defined(e.maxSlope))if(f.integer(e.maxSlope)&&f.inRange(e.maxSlope,0,100))this.options.claheMaxSlope=e.maxSlope;else throw f.invalidParameterError("maxSlope","integer between 0 and 100",e.maxSlope)}else throw f.invalidParameterError("options","plain object",e);return this}function cl(e){if(!f.object(e)||!Array.isArray(e.kernel)||!f.integer(e.width)||!f.integer(e.height)||!f.inRange(e.width,3,1001)||!f.inRange(e.height,3,1001)||e.height*e.width!==e.kernel.length)throw new Error("Invalid convolution kernel");return f.integer(e.scale)||(e.scale=e.kernel.reduce(function(r,t){return r+t},0)),e.scale<1&&(e.scale=1),f.integer(e.offset)||(e.offset=0),this.options.convKernel=e,this}function ul(e,r){if(!f.defined(e))this.options.threshold=128;else if(f.bool(e))this.options.threshold=e?128:0;else if(f.integer(e)&&f.inRange(e,0,255))this.options.threshold=e;else throw f.invalidParameterError("threshold","integer between 0 and 255",e);return!f.object(r)||r.greyscale===!0||r.grayscale===!0?this.options.thresholdGrayscale=!0:this.options.thresholdGrayscale=!1,this}function hl(e,r,t){if(this.options.boolean=this._createInputDescriptor(e,t),f.string(r)&&f.inArray(r,["and","or","eor"]))this.options.booleanOp=r;else throw f.invalidParameterError("operator","one of: and, or, eor",r);return this}function dl(e,r){if(!f.defined(e)&&f.number(r)?e=1:f.number(e)&&!f.defined(r)&&(r=0),!f.defined(e))this.options.linearA=[];else if(f.number(e))this.options.linearA=[e];else if(Array.isArray(e)&&e.length&&e.every(f.number))this.options.linearA=e;else throw f.invalidParameterError("a","number or array of numbers",e);if(!f.defined(r))this.options.linearB=[];else if(f.number(r))this.options.linearB=[r];else if(Array.isArray(r)&&r.length&&r.every(f.number))this.options.linearB=r;else throw f.invalidParameterError("b","number or array of numbers",r);if(this.options.linearA.length!==this.options.linearB.length)throw new Error("Expected a and b to be arrays of the same length");return this}function gl(e){if(!Array.isArray(e)||e.length!==3||e[0].length!==3||e[1].length!==3||e[2].length!==3)throw new Error("Invalid recombination matrix");return this.options.recombMatrix=[e[0][0],e[0][1],e[0][2],e[1][0],e[1][1],e[1][2],e[2][0],e[2][1],e[2][2]].map(Number),this}function ml(e){if(!f.plainObject(e))throw f.invalidParameterError("options","plain object",e);if("brightness"in e)if(f.number(e.brightness)&&e.brightness>=0)this.options.brightness=e.brightness;else throw f.invalidParameterError("brightness","number above zero",e.brightness);if("saturation"in e)if(f.number(e.saturation)&&e.saturation>=0)this.options.saturation=e.saturation;else throw f.invalidParameterError("saturation","number above zero",e.saturation);if("hue"in e)if(f.integer(e.hue))this.options.hue=e.hue%360;else throw f.invalidParameterError("hue","number",e.hue);if("lightness"in e)if(f.number(e.lightness))this.options.lightness=e.lightness;else throw f.invalidParameterError("lightness","number",e.lightness);return this}var yl=function(e){Object.assign(e.prototype,{rotate:Qs,flip:Ks,flop:Ys,affine:Zs,sharpen:el,median:rl,blur:tl,flatten:nl,unflatten:il,gamma:al,negate:ol,normalise:sl,normalize:ll,clahe:fl,convolve:cl,threshold:ul,boolean:hl,linear:dl,recomb:gl,modulate:ml})};const _n=nt,Z=re,jt={multiband:"multiband","b-w":"b-w",bw:"b-w",cmyk:"cmyk",srgb:"srgb"};function pl(e){const r=_n(e);return this.options.tintA=r.a(),this.options.tintB=r.b(),this}function bl(e){return this.options.greyscale=Z.bool(e)?e:!0,this}function vl(e){return this.greyscale(e)}function wl(e){if(!Z.string(e))throw Z.invalidParameterError("colourspace","string",e);return this.options.colourspaceInput=e,this}function El(e){return this.pipelineColourspace(e)}function Al(e){if(!Z.string(e))throw Z.invalidParameterError("colourspace","string",e);return this.options.colourspace=e,this}function Pl(e){return this.toColourspace(e)}function Sl(e,r){if(Z.defined(r))if(Z.object(r)||Z.string(r)){const t=_n(r);this.options[e]=[t.red(),t.green(),t.blue(),Math.round(t.alpha()*255)]}else throw Z.invalidParameterError("background","object or string",r)}var Il=function(e){Object.assign(e.prototype,{tint:pl,greyscale:bl,grayscale:vl,pipelineColourspace:wl,pipelineColorspace:El,toColourspace:Al,toColorspace:Pl,_setBackgroundColourOption:Sl}),e.colourspace=jt,e.colorspace=jt};const X=re,jl={and:"and",or:"or",eor:"eor"};function kl(){return this.options.removeAlpha=!0,this}function Rl(e){if(X.defined(e))if(X.number(e)&&X.inRange(e,0,1))this.options.ensureAlpha=e;else throw X.invalidParameterError("alpha","number between 0 and 1",e);else this.options.ensureAlpha=1;return this}function xl(e){const r={red:0,green:1,blue:2,alpha:3};if(Object.keys(r).includes(e)&&(e=r[e]),X.integer(e)&&X.inRange(e,0,4))this.options.extractChannel=e;else throw X.invalidParameterError("channel","integer or one of: red, green, blue, alpha",e);return this}function Ol(e,r){return Array.isArray(e)?e.forEach(function(t){this.options.joinChannelIn.push(this._createInputDescriptor(t,r))},this):this.options.joinChannelIn.push(this._createInputDescriptor(e,r)),this}function $l(e){if(X.string(e)&&X.inArray(e,["and","or","eor"]))this.options.bandBoolOp=e;else throw X.invalidParameterError("boolOp","one of: and, or, eor",e);return this}var Fl=function(e){Object.assign(e.prototype,{removeAlpha:kl,ensureAlpha:Rl,extractChannel:xl,joinChannel:Ol,bandbool:$l}),e.bool=jl};const kr=q,a=re,je=rt,kt=new Map([["heic","heif"],["heif","heif"],["avif","avif"],["jpeg","jpeg"],["jpg","jpeg"],["jpe","jpeg"],["tile","tile"],["dz","tile"],["png","png"],["raw","raw"],["tiff","tiff"],["tif","tiff"],["webp","webp"],["gif","gif"],["jp2","jp2"],["jpx","jp2"],["j2k","jp2"],["j2c","jp2"],["jxl","jxl"]]),Tl=/\.(jp[2x]|j2[kc])$/i,Cn=()=>new Error("JP2 output requires libvips with support for OpenJPEG"),Dn=e=>1<<31-Math.clz32(Math.ceil(Math.log2(e)));function Bl(e,r){let t;if(a.string(e)?a.string(this.options.input.file)&&kr.resolve(this.options.input.file)===kr.resolve(e)?t=new Error("Cannot use same file for input and output"):Tl.test(kr.extname(e))&&!this.constructor.format.jp2k.output.file&&(t=Cn()):t=new Error("Missing output file path"),t)if(a.fn(r))r(t);else return Promise.reject(t);else return this.options.fileOut=e,this._pipeline(r);return this}function Ml(e,r){return a.object(e)?this._setBooleanOption("resolveWithObject",e.resolveWithObject):this.options.resolveWithObject&&(this.options.resolveWithObject=!1),this.options.fileOut="",this._pipeline(a.fn(e)?e:r)}function Ll(e){if(this.options.withMetadata=a.bool(e)?e:!0,a.object(e)){if(a.defined(e.orientation))if(a.integer(e.orientation)&&a.inRange(e.orientation,1,8))this.options.withMetadataOrientation=e.orientation;else throw a.invalidParameterError("orientation","integer between 1 and 8",e.orientation);if(a.defined(e.density))if(a.number(e.density)&&e.density>0)this.options.withMetadataDensity=e.density;else throw a.invalidParameterError("density","positive number",e.density);if(a.defined(e.icc))if(a.string(e.icc))this.options.withMetadataIcc=e.icc;else throw a.invalidParameterError("icc","string filesystem path to ICC profile",e.icc);if(a.defined(e.exif))if(a.object(e.exif))for(const[r,t]of Object.entries(e.exif))if(a.object(t))for(const[n,i]of Object.entries(t))if(a.string(i))this.options.withMetadataStrs[`exif-${r.toLowerCase()}-${n}`]=i;else throw a.invalidParameterError(`exif.${r}.${n}`,"string",i);else throw a.invalidParameterError(`exif.${r}`,"object",t);else throw a.invalidParameterError("exif","object",e.exif)}return this}function Nl(e,r){const t=kt.get((a.object(e)&&a.string(e.id)?e.id:e).toLowerCase());if(!t)throw a.invalidParameterError("format",`one of: ${[...kt.keys()].join(", ")}`,e);return this[t](r)}function _l(e){if(a.object(e)){if(a.defined(e.quality))if(a.integer(e.quality)&&a.inRange(e.quality,1,100))this.options.jpegQuality=e.quality;else throw a.invalidParameterError("quality","integer between 1 and 100",e.quality);if(a.defined(e.progressive)&&this._setBooleanOption("jpegProgressive",e.progressive),a.defined(e.chromaSubsampling))if(a.string(e.chromaSubsampling)&&a.inArray(e.chromaSubsampling,["4:2:0","4:4:4"]))this.options.jpegChromaSubsampling=e.chromaSubsampling;else throw a.invalidParameterError("chromaSubsampling","one of: 4:2:0, 4:4:4",e.chromaSubsampling);const r=a.bool(e.optimizeCoding)?e.optimizeCoding:e.optimiseCoding;if(a.defined(r)&&this._setBooleanOption("jpegOptimiseCoding",r),a.defined(e.mozjpeg))if(a.bool(e.mozjpeg))e.mozjpeg&&(this.options.jpegTrellisQuantisation=!0,this.options.jpegOvershootDeringing=!0,this.options.jpegOptimiseScans=!0,this.options.jpegProgressive=!0,this.options.jpegQuantisationTable=3);else throw a.invalidParameterError("mozjpeg","boolean",e.mozjpeg);const t=a.bool(e.trellisQuantization)?e.trellisQuantization:e.trellisQuantisation;a.defined(t)&&this._setBooleanOption("jpegTrellisQuantisation",t),a.defined(e.overshootDeringing)&&this._setBooleanOption("jpegOvershootDeringing",e.overshootDeringing);const n=a.bool(e.optimizeScans)?e.optimizeScans:e.optimiseScans;a.defined(n)&&(this._setBooleanOption("jpegOptimiseScans",n),n&&(this.options.jpegProgressive=!0));const i=a.number(e.quantizationTable)?e.quantizationTable:e.quantisationTable;if(a.defined(i))if(a.integer(i)&&a.inRange(i,0,8))this.options.jpegQuantisationTable=i;else throw a.invalidParameterError("quantisationTable","integer between 0 and 8",i)}return this._updateFormatOut("jpeg",e)}function Cl(e){if(a.object(e)){if(a.defined(e.progressive)&&this._setBooleanOption("pngProgressive",e.progressive),a.defined(e.compressionLevel))if(a.integer(e.compressionLevel)&&a.inRange(e.compressionLevel,0,9))this.options.pngCompressionLevel=e.compressionLevel;else throw a.invalidParameterError("compressionLevel","integer between 0 and 9",e.compressionLevel);a.defined(e.adaptiveFiltering)&&this._setBooleanOption("pngAdaptiveFiltering",e.adaptiveFiltering);const r=e.colours||e.colors;if(a.defined(r))if(a.integer(r)&&a.inRange(r,2,256))this.options.pngBitdepth=Dn(r);else throw a.invalidParameterError("colours","integer between 2 and 256",r);if(a.defined(e.palette)?this._setBooleanOption("pngPalette",e.palette):[e.quality,e.effort,e.colours,e.colors,e.dither].some(a.defined)&&this._setBooleanOption("pngPalette",!0),this.options.pngPalette){if(a.defined(e.quality))if(a.integer(e.quality)&&a.inRange(e.quality,0,100))this.options.pngQuality=e.quality;else throw a.invalidParameterError("quality","integer between 0 and 100",e.quality);if(a.defined(e.effort))if(a.integer(e.effort)&&a.inRange(e.effort,1,10))this.options.pngEffort=e.effort;else throw a.invalidParameterError("effort","integer between 1 and 10",e.effort);if(a.defined(e.dither))if(a.number(e.dither)&&a.inRange(e.dither,0,1))this.options.pngDither=e.dither;else throw a.invalidParameterError("dither","number between 0.0 and 1.0",e.dither)}}return this._updateFormatOut("png",e)}function Dl(e){if(a.object(e)){if(a.defined(e.quality))if(a.integer(e.quality)&&a.inRange(e.quality,1,100))this.options.webpQuality=e.quality;else throw a.invalidParameterError("quality","integer between 1 and 100",e.quality);if(a.defined(e.alphaQuality))if(a.integer(e.alphaQuality)&&a.inRange(e.alphaQuality,0,100))this.options.webpAlphaQuality=e.alphaQuality;else throw a.invalidParameterError("alphaQuality","integer between 0 and 100",e.alphaQuality);if(a.defined(e.lossless)&&this._setBooleanOption("webpLossless",e.lossless),a.defined(e.nearLossless)&&this._setBooleanOption("webpNearLossless",e.nearLossless),a.defined(e.smartSubsample)&&this._setBooleanOption("webpSmartSubsample",e.smartSubsample),a.defined(e.preset))if(a.string(e.preset)&&a.inArray(e.preset,["default","photo","picture","drawing","icon","text"]))this.options.webpPreset=e.preset;else throw a.invalidParameterError("preset","one of: default, photo, picture, drawing, icon, text",e.preset);if(a.defined(e.effort))if(a.integer(e.effort)&&a.inRange(e.effort,0,6))this.options.webpEffort=e.effort;else throw a.invalidParameterError("effort","integer between 0 and 6",e.effort);a.defined(e.minSize)&&this._setBooleanOption("webpMinSize",e.minSize),a.defined(e.mixed)&&this._setBooleanOption("webpMixed",e.mixed)}return zn(e,this.options),this._updateFormatOut("webp",e)}function zl(e){if(a.object(e)){a.defined(e.reuse)&&this._setBooleanOption("gifReuse",e.reuse),a.defined(e.progressive)&&this._setBooleanOption("gifProgressive",e.progressive);const r=e.colours||e.colors;if(a.defined(r))if(a.integer(r)&&a.inRange(r,2,256))this.options.gifBitdepth=Dn(r);else throw a.invalidParameterError("colours","integer between 2 and 256",r);if(a.defined(e.effort))if(a.number(e.effort)&&a.inRange(e.effort,1,10))this.options.gifEffort=e.effort;else throw a.invalidParameterError("effort","integer between 1 and 10",e.effort);if(a.defined(e.dither))if(a.number(e.dither)&&a.inRange(e.dither,0,1))this.options.gifDither=e.dither;else throw a.invalidParameterError("dither","number between 0.0 and 1.0",e.dither);if(a.defined(e.interFrameMaxError))if(a.number(e.interFrameMaxError)&&a.inRange(e.interFrameMaxError,0,32))this.options.gifInterFrameMaxError=e.interFrameMaxError;else throw a.invalidParameterError("interFrameMaxError","number between 0.0 and 32.0",e.interFrameMaxError);if(a.defined(e.interPaletteMaxError))if(a.number(e.interPaletteMaxError)&&a.inRange(e.interPaletteMaxError,0,256))this.options.gifInterPaletteMaxError=e.interPaletteMaxError;else throw a.invalidParameterError("interPaletteMaxError","number between 0.0 and 256.0",e.interPaletteMaxError)}return zn(e,this.options),this._updateFormatOut("gif",e)}function Ul(e){if(!this.constructor.format.jp2k.output.buffer)throw Cn();if(a.object(e)){if(a.defined(e.quality))if(a.integer(e.quality)&&a.inRange(e.quality,1,100))this.options.jp2Quality=e.quality;else throw a.invalidParameterError("quality","integer between 1 and 100",e.quality);if(a.defined(e.lossless))if(a.bool(e.lossless))this.options.jp2Lossless=e.lossless;else throw a.invalidParameterError("lossless","boolean",e.lossless);if(a.defined(e.tileWidth))if(a.integer(e.tileWidth)&&a.inRange(e.tileWidth,1,32768))this.options.jp2TileWidth=e.tileWidth;else throw a.invalidParameterError("tileWidth","integer between 1 and 32768",e.tileWidth);if(a.defined(e.tileHeight))if(a.integer(e.tileHeight)&&a.inRange(e.tileHeight,1,32768))this.options.jp2TileHeight=e.tileHeight;else throw a.invalidParameterError("tileHeight","integer between 1 and 32768",e.tileHeight);if(a.defined(e.chromaSubsampling))if(a.string(e.chromaSubsampling)&&a.inArray(e.chromaSubsampling,["4:2:0","4:4:4"]))this.options.jp2ChromaSubsampling=e.chromaSubsampling;else throw a.invalidParameterError("chromaSubsampling","one of: 4:2:0, 4:4:4",e.chromaSubsampling)}return this._updateFormatOut("jp2",e)}function zn(e,r){if(a.object(e)&&a.defined(e.loop))if(a.integer(e.loop)&&a.inRange(e.loop,0,65535))r.loop=e.loop;else throw a.invalidParameterError("loop","integer between 0 and 65535",e.loop);if(a.object(e)&&a.defined(e.delay))if(a.integer(e.delay)&&a.inRange(e.delay,0,65535))r.delay=[e.delay];else if(Array.isArray(e.delay)&&e.delay.every(a.integer)&&e.delay.every(t=>a.inRange(t,0,65535)))r.delay=e.delay;else throw a.invalidParameterError("delay","integer or an array of integers between 0 and 65535",e.delay)}function Gl(e){if(a.object(e)){if(a.defined(e.quality))if(a.integer(e.quality)&&a.inRange(e.quality,1,100))this.options.tiffQuality=e.quality;else throw a.invalidParameterError("quality","integer between 1 and 100",e.quality);if(a.defined(e.bitdepth))if(a.integer(e.bitdepth)&&a.inArray(e.bitdepth,[1,2,4,8]))this.options.tiffBitdepth=e.bitdepth;else throw a.invalidParameterError("bitdepth","1, 2, 4 or 8",e.bitdepth);if(a.defined(e.tile)&&this._setBooleanOption("tiffTile",e.tile),a.defined(e.tileWidth))if(a.integer(e.tileWidth)&&e.tileWidth>0)this.options.tiffTileWidth=e.tileWidth;else throw a.invalidParameterError("tileWidth","integer greater than zero",e.tileWidth);if(a.defined(e.tileHeight))if(a.integer(e.tileHeight)&&e.tileHeight>0)this.options.tiffTileHeight=e.tileHeight;else throw a.invalidParameterError("tileHeight","integer greater than zero",e.tileHeight);if(a.defined(e.pyramid)&&this._setBooleanOption("tiffPyramid",e.pyramid),a.defined(e.xres))if(a.number(e.xres)&&e.xres>0)this.options.tiffXres=e.xres;else throw a.invalidParameterError("xres","number greater than zero",e.xres);if(a.defined(e.yres))if(a.number(e.yres)&&e.yres>0)this.options.tiffYres=e.yres;else throw a.invalidParameterError("yres","number greater than zero",e.yres);if(a.defined(e.compression))if(a.string(e.compression)&&a.inArray(e.compression,["none","jpeg","deflate","packbits","ccittfax4","lzw","webp","zstd","jp2k"]))this.options.tiffCompression=e.compression;else throw a.invalidParameterError("compression","one of: none, jpeg, deflate, packbits, ccittfax4, lzw, webp, zstd, jp2k",e.compression);if(a.defined(e.predictor))if(a.string(e.predictor)&&a.inArray(e.predictor,["none","horizontal","float"]))this.options.tiffPredictor=e.predictor;else throw a.invalidParameterError("predictor","one of: none, horizontal, float",e.predictor);if(a.defined(e.resolutionUnit))if(a.string(e.resolutionUnit)&&a.inArray(e.resolutionUnit,["inch","cm"]))this.options.tiffResolutionUnit=e.resolutionUnit;else throw a.invalidParameterError("resolutionUnit","one of: inch, cm",e.resolutionUnit)}return this._updateFormatOut("tiff",e)}function ql(e){return this.heif({...e,compression:"av1"})}function Wl(e){if(a.object(e)){if(a.defined(e.quality))if(a.integer(e.quality)&&a.inRange(e.quality,1,100))this.options.heifQuality=e.quality;else throw a.invalidParameterError("quality","integer between 1 and 100",e.quality);if(a.defined(e.lossless))if(a.bool(e.lossless))this.options.heifLossless=e.lossless;else throw a.invalidParameterError("lossless","boolean",e.lossless);if(a.defined(e.compression))if(a.string(e.compression)&&a.inArray(e.compression,["av1","hevc"]))this.options.heifCompression=e.compression;else throw a.invalidParameterError("compression","one of: av1, hevc",e.compression);if(a.defined(e.effort))if(a.integer(e.effort)&&a.inRange(e.effort,0,9))this.options.heifEffort=e.effort;else throw a.invalidParameterError("effort","integer between 0 and 9",e.effort);if(a.defined(e.chromaSubsampling))if(a.string(e.chromaSubsampling)&&a.inArray(e.chromaSubsampling,["4:2:0","4:4:4"]))this.options.heifChromaSubsampling=e.chromaSubsampling;else throw a.invalidParameterError("chromaSubsampling","one of: 4:2:0, 4:4:4",e.chromaSubsampling)}return this._updateFormatOut("heif",e)}function Vl(e){if(a.object(e)){if(a.defined(e.quality))if(a.integer(e.quality)&&a.inRange(e.quality,1,100))this.options.jxlDistance=e.quality>=30?.1+(100-e.quality)*.09:53/3e3*e.quality*e.quality-23/20*e.quality+25;else throw a.invalidParameterError("quality","integer between 1 and 100",e.quality);else if(a.defined(e.distance))if(a.number(e.distance)&&a.inRange(e.distance,0,15))this.options.jxlDistance=e.distance;else throw a.invalidParameterError("distance","number between 0.0 and 15.0",e.distance);if(a.defined(e.decodingTier))if(a.integer(e.decodingTier)&&a.inRange(e.decodingTier,0,4))this.options.jxlDecodingTier=e.decodingTier;else throw a.invalidParameterError("decodingTier","integer between 0 and 4",e.decodingTier);if(a.defined(e.lossless))if(a.bool(e.lossless))this.options.jxlLossless=e.lossless;else throw a.invalidParameterError("lossless","boolean",e.lossless);if(a.defined(e.effort))if(a.integer(e.effort)&&a.inRange(e.effort,3,9))this.options.jxlEffort=e.effort;else throw a.invalidParameterError("effort","integer between 3 and 9",e.effort)}return this._updateFormatOut("jxl",e)}function Hl(e){if(a.object(e)&&a.defined(e.depth))if(a.string(e.depth)&&a.inArray(e.depth,["char","uchar","short","ushort","int","uint","float","complex","double","dpcomplex"]))this.options.rawDepth=e.depth;else throw a.invalidParameterError("depth","one of: char, uchar, short, ushort, int, uint, float, complex, double, dpcomplex",e.depth);return this._updateFormatOut("raw")}function Xl(e){if(a.object(e)){if(a.defined(e.size))if(a.integer(e.size)&&a.inRange(e.size,1,8192))this.options.tileSize=e.size;else throw a.invalidParameterError("size","integer between 1 and 8192",e.size);if(a.defined(e.overlap))if(a.integer(e.overlap)&&a.inRange(e.overlap,0,8192)){if(e.overlap>this.options.tileSize)throw a.invalidParameterError("overlap",`<= size (${this.options.tileSize})`,e.overlap);this.options.tileOverlap=e.overlap}else throw a.invalidParameterError("overlap","integer between 0 and 8192",e.overlap);if(a.defined(e.container))if(a.string(e.container)&&a.inArray(e.container,["fs","zip"]))this.options.tileContainer=e.container;else throw a.invalidParameterError("container","one of: fs, zip",e.container);if(a.defined(e.layout))if(a.string(e.layout)&&a.inArray(e.layout,["dz","google","iiif","iiif3","zoomify"]))this.options.tileLayout=e.layout;else throw a.invalidParameterError("layout","one of: dz, google, iiif, iiif3, zoomify",e.layout);if(a.defined(e.angle))if(a.integer(e.angle)&&!(e.angle%90))this.options.tileAngle=e.angle;else throw a.invalidParameterError("angle","positive/negative multiple of 90",e.angle);if(this._setBackgroundColourOption("tileBackground",e.background),a.defined(e.depth))if(a.string(e.depth)&&a.inArray(e.depth,["onepixel","onetile","one"]))this.options.tileDepth=e.depth;else throw a.invalidParameterError("depth","one of: onepixel, onetile, one",e.depth);if(a.defined(e.skipBlanks))if(a.integer(e.skipBlanks)&&a.inRange(e.skipBlanks,-1,65535))this.options.tileSkipBlanks=e.skipBlanks;else throw a.invalidParameterError("skipBlanks","integer between -1 and 255/65535",e.skipBlanks);else a.defined(e.layout)&&e.layout==="google"&&(this.options.tileSkipBlanks=5);const r=a.bool(e.center)?e.center:e.centre;if(a.defined(r)&&this._setBooleanOption("tileCentre",r),a.defined(e.id))if(a.string(e.id))this.options.tileId=e.id;else throw a.invalidParameterError("id","string",e.id);if(a.defined(e.basename))if(a.string(e.basename))this.options.tileBasename=e.basename;else throw a.invalidParameterError("basename","string",e.basename)}if(a.inArray(this.options.formatOut,["jpeg","png","webp"]))this.options.tileFormat=this.options.formatOut;else if(this.options.formatOut!=="input")throw a.invalidParameterError("format","one of: jpeg, png, webp",this.options.formatOut);return this._updateFormatOut("dz")}function Jl(e){if(!a.plainObject(e))throw a.invalidParameterError("options","object",e);if(a.integer(e.seconds)&&a.inRange(e.seconds,0,3600))this.options.timeoutSeconds=e.seconds;else throw a.invalidParameterError("seconds","integer between 0 and 3600",e.seconds);return this}function Ql(e,r){return a.object(r)&&r.force===!1||(this.options.formatOut=e),this}function Kl(e,r){if(a.bool(r))this.options[e]=r;else throw a.invalidParameterError(e,"boolean",r)}function Yl(){this.options.streamOut||(this.options.streamOut=!0,this._pipeline())}function Zl(e){return typeof e=="function"?(this._isStreamInput()?this.on("finish",()=>{this._flattenBufferIn(),je.pipeline(this.options,e)}):je.pipeline(this.options,e),this):this.options.streamOut?(this._isStreamInput()?(this.once("finish",()=>{this._flattenBufferIn(),je.pipeline(this.options,(r,t,n)=>{r?this.emit("error",r):(this.emit("info",n),this.push(t)),this.push(null),this.on("end",()=>this.emit("close"))})}),this.streamInFinished&&this.emit("finish")):je.pipeline(this.options,(r,t,n)=>{r?this.emit("error",r):(this.emit("info",n),this.push(t)),this.push(null),this.on("end",()=>this.emit("close"))}),this):this._isStreamInput()?new Promise((r,t)=>{this.once("finish",()=>{this._flattenBufferIn(),je.pipeline(this.options,(n,i,o)=>{n?t(n):this.options.resolveWithObject?r({data:i,info:o}):r(i)})})}):new Promise((r,t)=>{je.pipeline(this.options,(n,i,o)=>{n?t(n):this.options.resolveWithObject?r({data:i,info:o}):r(i)})})}var ef=function(e){Object.assign(e.prototype,{toFile:Bl,toBuffer:Ml,withMetadata:Ll,toFormat:Nl,jpeg:_l,jp2:Ul,png:Cl,webp:Dl,tiff:Gl,avif:ql,heif:Wl,jxl:Vl,gif:zl,raw:Hl,tile:Xl,timeout:Jl,_updateFormatOut:Ql,_setBooleanOption:Kl,_read:Yl,_pipeline:Zl})};const rf=q,tf=q,nf=q,Rt=pn,U=re,Un=Qr(),D=rt,Ue=D.format();Ue.heif.output.alias=["avif","heic"];Ue.jpeg.output.alias=["jpe","jpg"];Ue.tiff.output.alias=["tif"];Ue.jp2k.output.alias=["j2c","j2k","jp2","jpx"];const af={nearest:"nearest",bilinear:"bilinear",bicubic:"bicubic",locallyBoundedBicubic:"lbb",nohalo:"nohalo",vertexSplitQuadraticBasisSpline:"vsqbs"};let Ce={vips:D.libvipsVersion()};try{Ce=In(`../vendor/${Ce.vips}/${Un}/versions.json`)}catch{}Ce.sharp=bn.version;const Gn={current:Un,installed:[]};try{Gn.installed=rf.readdirSync(tf.join(__dirname,`../vendor/${Ce.vips}`))}catch{}function qn(e){return U.bool(e)?e?D.cache(50,20,100):D.cache(0,0,0):U.object(e)?D.cache(e.memory,e.files,e.items):D.cache()}qn(!0);function of(e){return D.concurrency(U.integer(e)?e:null)}Rt.familySync()===Rt.GLIBC&&!D._isUsingJemalloc()&&D.concurrency(1);const sf=new nf.EventEmitter;function lf(){return D.counters()}function Wn(e){return D.simd(U.bool(e)?e:null)}Wn(!0);function ff(e){if(U.object(e))if(Array.isArray(e.operation)&&e.operation.every(U.string))D.block(e.operation,!0);else throw U.invalidParameterError("operation","Array<string>",e.operation);else throw U.invalidParameterError("options","object",e)}function cf(e){if(U.object(e))if(Array.isArray(e.operation)&&e.operation.every(U.string))D.block(e.operation,!1);else throw U.invalidParameterError("operation","Array<string>",e.operation);else throw U.invalidParameterError("options","object",e)}var uf=function(e){e.cache=qn,e.concurrency=of,e.counters=lf,e.simd=Wn,e.format=Ue,e.interpolators=af,e.versions=Ce,e.vendor=Gn,e.queue=sf,e.block=ff,e.unblock=cf};const te=ls;Cs(te);Vs(te);Xs(te);yl(te);Il(te);Fl(te);ef(te);uf(te);var Vn=te;const hf=Kn(Vn),mf=Yn({__proto__:null,default:hf},[Vn]);export{mf as i};
